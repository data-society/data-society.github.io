<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chiang Mai Trip Plan ‚Äî Feb 6‚Äì8, 2026</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@300;400;600;700&family=DM+Sans:ital,wght@0,300;0,400;0,500;0,700;1,400&family=Playfair+Display:wght@600;700;800&family=JetBrains+Mono:wght@400&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-deep: #0c0f14;
            --bg-card: #161a23;
            --bg-card-hover: #1c2029;
            --border: rgba(255,255,255,0.06);
            --border-active: rgba(255,255,255,0.15);
            --text: #e8e6e3;
            --text-muted: #787a80;
            --text-dim: #4a4c52;
            --accent-gold: #d4a853;
            --accent-temple: #e8a849;
            --accent-food: #e05a4f;
            --accent-coffee: #b07d56;
            --accent-hotel: #5a8fd4;
            --accent-civic: #8b6cc1;
            --accent-airport: #5db882;
            --accent-pharmacy: #4fc1a6;
            --accent-izakaya: #d46a8b;
            --day-fri: #5a8fd4;
            --day-sat: #e8a849;
            --day-sun: #8b6cc1;
            --radius: 12px;
            --radius-sm: 8px;
        }
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            background: var(--bg-deep); color: var(--text);
            font-family: 'DM Sans', 'Noto Sans Thai', sans-serif;
            line-height: 1.6; -webkit-font-smoothing: antialiased;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 1.5rem; }
        header { padding: 2.5rem 0 1rem; border-bottom: 1px solid var(--border); margin-bottom: 1.5rem; }
        header h1 {
            font-family: 'Playfair Display', serif;
            font-size: clamp(1.5rem, 4vw, 2.2rem);
            font-weight: 700; letter-spacing: -0.02em;
        }
        header h1 span { color: var(--accent-gold); }
        .subtitle { font-size: 0.82rem; color: var(--text-muted); margin-top: 0.25rem; font-weight: 300; }
        .ref-bar { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 1.5rem; }
        .ref-chip {
            display: inline-flex; align-items: center; gap: 0.4rem;
            background: var(--bg-card); border: 1px solid var(--border);
            border-radius: 99px; padding: 0.35rem 0.75rem; font-size: 0.72rem; color: var(--text-muted);
        }
        .ref-chip .label { color: var(--text-dim); }
        .ref-chip .val { font-family: 'JetBrains Mono', monospace; color: var(--accent-gold); letter-spacing: 0.03em; }
        #map-wrap {
            border-radius: var(--radius); overflow: hidden;
            border: 1px solid var(--border); margin-bottom: 1.5rem; position: relative;
        }
        #map { height: 480px; width: 100%; background: var(--bg-card); }
        .map-legend {
            position: absolute; bottom: 10px; left: 10px; z-index: 1000;
            background: rgba(12,15,20,0.92); backdrop-filter: blur(12px);
            border: 1px solid var(--border); border-radius: var(--radius-sm);
            padding: 0.55rem 0.75rem; display: flex; flex-wrap: wrap; gap: 0.4rem 0.9rem;
            font-size: 0.65rem; color: var(--text-muted);
        }
        .legend-item { display: flex; align-items: center; gap: 0.3rem; }
        .legend-dot { width: 9px; height: 9px; border-radius: 50%; border: 2px solid currentColor; }
        .export-bar { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 2rem; }
        .export-btn {
            display: inline-flex; align-items: center; gap: 0.35rem;
            background: var(--bg-card); border: 1px solid var(--border);
            color: var(--text-muted); padding: 0.4rem 0.85rem;
            border-radius: 99px; font-size: 0.72rem; cursor: pointer;
            text-decoration: none; transition: all 0.2s; font-family: inherit;
        }
        .export-btn:hover { border-color: var(--accent-gold); color: var(--accent-gold); background: rgba(212,168,83,0.06); }
        .day-section { margin-bottom: 2rem; }
        .day-header {
            display: flex; align-items: center; gap: 0.7rem;
            margin-bottom: 0.8rem; padding-bottom: 0.45rem; border-bottom: 1px solid var(--border);
        }
        .day-badge {
            font-size: 0.62rem; font-weight: 700; text-transform: uppercase;
            letter-spacing: 0.1em; padding: 0.2rem 0.55rem; border-radius: 99px; border: 1px solid;
        }
        .day-badge.fri { color: var(--day-fri); border-color: rgba(90,143,212,0.3); background: rgba(90,143,212,0.08); }
        .day-badge.sat { color: var(--day-sat); border-color: rgba(232,168,73,0.3); background: rgba(232,168,73,0.08); }
        .day-badge.sun { color: var(--day-sun); border-color: rgba(139,108,193,0.3); background: rgba(139,108,193,0.08); }
        .day-title { font-weight: 600; font-size: 0.92rem; }
        .day-date { color: var(--text-muted); font-size: 0.78rem; margin-left: auto; }
        .timeline { position: relative; padding-left: 2rem; }
        .timeline::before {
            content: ''; position: absolute; left: 7px; top: 6px; bottom: 6px; width: 1px; background: var(--border);
        }
        .tl-item {
            position: relative; margin-bottom: 1rem; padding: 0.75rem 0.9rem;
            background: var(--bg-card); border: 1px solid var(--border); border-radius: var(--radius-sm);
            transition: all 0.2s; cursor: default;
        }
        .tl-item:hover { border-color: var(--border-active); background: var(--bg-card-hover); }
        .tl-item[data-loc] { cursor: pointer; }
        .tl-item::before {
            content: ''; position: absolute; left: -1.7rem; top: 0.9rem;
            width: 9px; height: 9px; border-radius: 50%;
            border: 2px solid var(--accent-gold); background: var(--bg-deep);
        }
        .tl-item.temple::before { border-color: var(--accent-temple); }
        .tl-item.food::before { border-color: var(--accent-food); }
        .tl-item.coffee::before { border-color: var(--accent-coffee); }
        .tl-item.hotel::before { border-color: var(--accent-hotel); }
        .tl-item.civic::before { border-color: var(--accent-civic); }
        .tl-item.airport::before { border-color: var(--accent-airport); }
        .tl-item.pharmacy::before { border-color: var(--accent-pharmacy); }
        .tl-item.izakaya::before { border-color: var(--accent-izakaya); }
        .tl-item.drive::before { border-color: var(--text-dim); }
        .tl-time { font-size: 0.68rem; color: var(--text-dim); font-weight: 500; text-transform: uppercase; letter-spacing: 0.04em; margin-bottom: 0.15rem; }
        .tl-name { font-weight: 600; font-size: 0.88rem; margin-bottom: 0.1rem; }
        .tl-name-th { font-size: 0.78rem; color: var(--text-muted); font-family: 'Noto Sans Thai', sans-serif; margin-bottom: 0.2rem; }
        .tl-desc { font-size: 0.76rem; color: var(--text-muted); line-height: 1.5; }
        .tl-tag {
            display: inline-block; font-size: 0.58rem; font-weight: 600; text-transform: uppercase;
            letter-spacing: 0.07em; padding: 0.12rem 0.45rem; border-radius: 99px; margin-top: 0.35rem;
        }
        .tl-tag.temple { color: var(--accent-temple); background: rgba(232,168,73,0.1); }
        .tl-tag.food { color: var(--accent-food); background: rgba(224,90,79,0.1); }
        .tl-tag.coffee { color: var(--accent-coffee); background: rgba(176,125,86,0.1); }
        .tl-tag.hotel { color: var(--accent-hotel); background: rgba(90,143,212,0.1); }
        .tl-tag.civic { color: var(--accent-civic); background: rgba(139,108,193,0.1); }
        .tl-tag.drive { color: var(--text-dim); background: rgba(255,255,255,0.04); }
        .tl-tag.airport { color: var(--accent-airport); background: rgba(93,184,130,0.1); }
        .tl-tag.pharmacy { color: var(--accent-pharmacy); background: rgba(79,193,166,0.1); }
        .tl-tag.izakaya { color: var(--accent-izakaya); background: rgba(212,106,139,0.1); }
        .tl-tag.warn { color: #e8a849; background: rgba(232,168,73,0.12); }
        .tl-nav {
            display: inline-flex; align-items: center; gap: 0.25rem;
            font-size: 0.68rem; color: var(--accent-gold); text-decoration: none;
            margin-top: 0.35rem; margin-left: 0.5rem; opacity: 0.65; transition: opacity 0.2s;
        }
        .tl-nav:hover { opacity: 1; text-decoration: underline; }
        .flight-row { display: flex; align-items: center; gap: 1rem; padding: 0.5rem 0; font-size: 0.82rem; }
        .flight-code { font-family: 'JetBrains Mono', monospace; font-size: 1.1rem; color: var(--text); letter-spacing: 0.04em; }
        .flight-arrow { color: var(--text-dim); font-size: 0.9rem; }
        .flight-time { color: var(--accent-gold); font-family: 'JetBrains Mono', monospace; font-size: 0.82rem; }
        .note-card {
            background: rgba(212,168,83,0.04); border: 1px solid rgba(212,168,83,0.12);
            border-radius: var(--radius-sm); padding: 0.65rem 0.9rem;
            font-size: 0.75rem; color: var(--text-muted); margin-top: 1.5rem;
        }
        .note-card strong { color: var(--accent-gold); }
        footer {
            margin-top: 2.5rem; padding: 1.2rem 0 2rem; border-top: 1px solid var(--border);
            font-size: 0.68rem; color: var(--text-dim); text-align: center;
        }
        .custom-marker {
            display: flex; align-items: center; justify-content: center;
            width: 28px; height: 28px; border-radius: 50% 50% 50% 0;
            transform: rotate(-45deg); border: 2px solid #fff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.4);
        }
        .custom-marker span { transform: rotate(45deg); font-size: 12px; }
        .leaflet-popup-content-wrapper {
            background: var(--bg-card) !important; color: var(--text) !important;
            border: 1px solid var(--border) !important; border-radius: var(--radius-sm) !important;
            box-shadow: 0 8px 32px rgba(0,0,0,0.5) !important;
        }
        .leaflet-popup-tip { background: var(--bg-card) !important; }
        .leaflet-popup-content { font-family: 'DM Sans','Noto Sans Thai',sans-serif !important; font-size: 12.5px !important; }
        .popup-title { font-weight: 700; margin-bottom: 2px; }
        .popup-sub { font-size: 11px; color: var(--text-muted); margin-bottom: 3px; }
        .popup-link { font-size: 11px; color: var(--accent-gold); }
        @media (max-width: 768px) {
            .container { padding: 1rem; }
            #map { height: 340px; }
            .ref-bar { gap: 0.35rem; }
            .ref-chip { font-size: 0.65rem; padding: 0.25rem 0.6rem; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Chiang Mai <span>&amp;</span> Beyond</h1>
            <div class="subtitle">Trip Plan ¬∑ Fri 6 ‚Äì Sun 8 February 2026 ¬∑ Temples ¬∑ Laab ¬∑ Coffee ¬∑ Izakaya</div>
        </header>

        <div class="ref-bar">
            <div class="ref-chip"><span class="label">‚úà Flight</span><span class="val">FNQF5K</span></div>
            <div class="ref-chip"><span class="label">üè® Agoda</span><span class="val">1979064961</span></div>
            <div class="ref-chip"><span class="label">‚Üí BKK‚ÄìCNX</span><span class="val">Fri 19:05‚Äì20:25</span></div>
            <div class="ref-chip"><span class="label">‚Üê CNX‚ÄìBKK</span><span class="val">Sun 21:05‚Äì22:25</span></div>
        </div>

        <div id="map-wrap">
            <div id="map"></div>
            <div class="map-legend">
                <div class="legend-item"><span class="legend-dot" style="color:var(--accent-temple)"></span> Temple</div>
                <div class="legend-item"><span class="legend-dot" style="color:var(--accent-food)"></span> Food</div>
                <div class="legend-item"><span class="legend-dot" style="color:var(--accent-coffee)"></span> Coffee</div>
                <div class="legend-item"><span class="legend-dot" style="color:var(--accent-hotel)"></span> Hotel</div>
                <div class="legend-item"><span class="legend-dot" style="color:var(--accent-izakaya)"></span> Izakaya</div>
                <div class="legend-item"><span class="legend-dot" style="color:var(--accent-pharmacy)"></span> Pharmacy</div>
                <div class="legend-item"><span class="legend-dot" style="color:var(--accent-civic)"></span> Civic</div>
                <div class="legend-item"><span class="legend-dot" style="color:var(--accent-airport)"></span> Airport</div>
            </div>
        </div>

        <div class="export-bar">
            <a id="gmaps-link" class="export-btn" target="_blank" rel="noopener">üìç Open in Google Maps</a>
            <button class="export-btn" onclick="exportGeoJSON()">üíæ Export GeoJSON</button>
            <button class="export-btn" onclick="exportKML()">üåê Export KML</button>
        </div>

        <!-- ‚ïê‚ïê‚ïê FRIDAY ‚ïê‚ïê‚ïê -->
        <section class="day-section">
            <div class="day-header">
                <span class="day-badge fri">FRI</span>
                <span class="day-title">Arrival &amp; Late-Night Izakaya</span>
                <span class="day-date">6 February 2026</span>
            </div>
            <div class="timeline">
                <div class="tl-item airport" data-loc="0" onclick="flyTo(0)">
                    <div class="tl-time">20:25 ‚Äî Arrive</div>
                    <div class="tl-name">‚úà Land at Chiang Mai International (CNX)</div>
                    <div class="tl-name-th">BKK ‚Üí CNX ¬∑ Nonstop ¬∑ Ref: FNQF5K</div>
                    <div class="flight-row">
                        <span class="flight-code">BKK</span>
                        <span class="flight-arrow">‚Üí</span>
                        <span class="flight-code">CNX</span>
                        <span class="flight-time" style="margin-left:auto">19:05 ‚Äì 20:25</span>
                    </div>
                    <span class="tl-tag airport">Arrival</span>
                </div>
                <div class="tl-item izakaya" data-loc="1" onclick="flyTo(1)">
                    <div class="tl-time">21:00 ‚Äì 23:00</div>
                    <div class="tl-name">Penn.izakaya</div>
                    <div class="tl-desc">Late-night Japanese comfort food, ~15 min from the airport near Tha Phae area. Open until midnight ‚Äî take your time settling in over good food.</div>
                    <span class="tl-tag izakaya">Izakaya ¬∑ Open till midnight</span>
                    <a class="tl-nav" href="https://maps.google.com/?q=RX3M%2B8W+Chiang+Mai" target="_blank">Navigate ‚Üó</a>
                </div>
                <div class="tl-item hotel" data-loc="2" onclick="flyTo(2)">
                    <div class="tl-time">23:15</div>
                    <div class="tl-name">Check in ‚Äî ibis Styles Chiang Mai</div>
                    <div class="tl-name-th">Agoda Booking: 1979064961</div>
                    <div class="tl-desc">~5 min from Penn.izakaya. Rest up for the big Saturday ahead.</div>
                    <span class="tl-tag hotel">Hotel ¬∑ Night 1 of 2</span>
                    <a class="tl-nav" href="https://maps.google.com/?q=ibis+Styles+Chiang+Mai" target="_blank">Navigate ‚Üó</a>
                </div>
            </div>
        </section>

        <!-- ‚ïê‚ïê‚ïê SATURDAY ‚ïê‚ïê‚ïê -->
        <section class="day-section">
            <div class="day-header">
                <span class="day-badge sat">SAT</span>
                <span class="day-title">Temples ¬∑ Laab ¬∑ Doi Kham ¬∑ Suckling Pig</span>
                <span class="day-date">7 February 2026</span>
            </div>
            <div class="timeline">
                <div class="tl-item drive">
                    <div class="tl-time">06:30</div>
                    <div class="tl-name">üöó Depart north to Mae Taeng</div>
                    <div class="tl-desc">~50 km via Route 107. Beautiful morning drive through the valley.</div>
                    <span class="tl-tag drive">Drive ¬∑ ~1 hr</span>
                </div>
                <div class="tl-item temple" data-loc="3" onclick="flyTo(3)">
                    <div class="tl-time">07:30 ‚Äì 09:00</div>
                    <div class="tl-name">‡∏ß‡∏±‡∏î‡∏ó‡∏∏‡πà‡∏á‡∏´‡∏•‡∏ß‡∏á (Wat Thung Luang)</div>
                    <div class="tl-name-th">Mae Taeng District ¬∑ 5W3J+XJ</div>
                    <div class="tl-desc">Lanna temple of ‡∏Ñ‡∏£‡∏π‡∏ö‡∏≤‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏±‡∏¢ ‡∏ò‡∏°‡∏°‡∏ä‡πÇ‡∏¢. Explore the viharn, ‡∏°‡∏´‡∏≤‡πÄ‡∏à‡∏î‡∏µ‡∏¢‡πå‡∏ô‡∏±‡∏Å‡∏©‡∏±‡∏ï‡∏£, and grounds. Known for herbal medicine tradition and meditation.</div>
                    <span class="tl-tag temple">Temple</span>
                    <a class="tl-nav" href="https://maps.google.com/?q=5W3J%2BXJ+Mae+Taeng+Chiang+Mai" target="_blank">Navigate ‚Üó</a>
                </div>
                <div class="tl-item food" data-loc="4" onclick="flyTo(4)">
                    <div class="tl-time">09:15 ‚Äì 10:00</div>
                    <div class="tl-name">‡∏•‡∏≤‡∏ö‡∏ï‡πâ‡∏ô‡∏Ç‡∏≤‡∏°</div>
                    <div class="tl-name-th">Laab Ton Kham ¬∑ right after ‡∏ß‡∏±‡∏î‡∏ó‡∏∏‡πà‡∏á‡∏´‡∏•‡∏ß‡∏á</div>
                    <div class="tl-desc">Renowned northern-style laab in the Mae Taeng countryside. Just minutes from the temple.</div>
                    <span class="tl-tag food">Food</span>
                    <a class="tl-nav" href="https://maps.google.com/?q=4WQW%2BFW+San+Mahaphon+Mae+Taeng+Chiang+Mai" target="_blank">Navigate ‚Üó</a>
                </div>
                <div class="tl-item drive">
                    <div class="tl-time">10:00 ‚Äì 11:00</div>
                    <div class="tl-name">üöó Drive back south into the city</div>
                    <div class="tl-desc">~50 km via Route 107.</div>
                    <span class="tl-tag drive">Drive ¬∑ ~1 hr</span>
                </div>
                <div class="tl-item pharmacy" data-loc="5" onclick="flyTo(5)">
                    <div class="tl-time">11:00 ‚Äì 11:15</div>
                    <div class="tl-name">Pharmacy ‡∏´‡∏ô‡πâ‡∏≤ CMU ‡∏°.‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà</div>
                    <div class="tl-desc">Quick pickup of personal health boost medicines. On the way, near campus.</div>
                    <span class="tl-tag pharmacy">Pharmacy ¬∑ Quick Stop</span>
                    <a class="tl-nav" href="https://maps.google.com/?q=RX53%2B9X+Chiang+Mai" target="_blank">Navigate ‚Üó</a>
                </div>
                <div class="tl-item food" data-loc="6" onclick="flyTo(6)">
                    <div class="tl-time">11:30 ‚Äì 12:30</div>
                    <div class="tl-name">‡∏•‡∏≤‡∏ö‡∏ö‡∏±‡∏ß‡∏ï‡∏≠‡∏á</div>
                    <div class="tl-name-th">Laab Bua Tong ¬∑ ‚ö† Saturday only ¬∑ Last order ~14:30</div>
                    <div class="tl-desc">Legendary laab. Arriving well before the 2:30 PM last call. East of city, ~20 min from CMU.</div>
                    <span class="tl-tag food">Food</span>
                    <span class="tl-tag warn">Sat Only ¬∑ LO 14:30</span>
                    <a class="tl-nav" href="https://maps.google.com/?q=Q2QH%2BRG+Chiang+Mai" target="_blank">Navigate ‚Üó</a>
                </div>
                <div class="tl-item drive">
                    <div class="tl-time">12:30 ‚Äì 13:00</div>
                    <div class="tl-name">üöó Drive southwest to Doi Kham</div>
                    <div class="tl-desc">~15 km across the city to the hillside temple.</div>
                    <span class="tl-tag drive">Drive ¬∑ ~30 min</span>
                </div>
                <div class="tl-item temple" data-loc="7" onclick="flyTo(7)">
                    <div class="tl-time">13:00 ‚Äì 16:30</div>
                    <div class="tl-name">‡∏û‡∏£‡∏∞‡∏ò‡∏≤‡∏ï‡∏∏‡∏î‡∏≠‡∏¢‡∏Ñ‡∏≥ (Phra That Doi Kham)</div>
                    <div class="tl-name-th">QW59+QF ¬∑ Hilltop temple with sweeping views</div>
                    <div class="tl-desc">The centrepiece of the trip. A full 3.5 hours ‚Äî no rush at all. Climb at your own pace, circumambulate the chedi, make your prayers and offerings properly. Afternoon light illuminates the valley beautifully. One of Chiang Mai's most revered temples.</div>
                    <span class="tl-tag temple">Temple ¬∑ Priority ¬∑ Unhurried</span>
                    <a class="tl-nav" href="https://maps.google.com/?q=QW59%2BQF+Chiang+Mai" target="_blank">Navigate ‚Üó</a>
                </div>
                <div class="tl-item coffee" data-loc="8" onclick="flyTo(8)">
                    <div class="tl-time">17:00 ‚Äì 18:00</div>
                    <div class="tl-name">The Baristro Asian Style</div>
                    <div class="tl-desc">Wind down from Doi Kham at this gorgeous Thai-contemporary cafe. ~20 min from the temple.</div>
                    <span class="tl-tag coffee">Coffee</span>
                    <a class="tl-nav" href="https://maps.google.com/?q=QXQ2%2BXM+Chiang+Mai" target="_blank">Navigate ‚Üó</a>
                </div>
                <div class="tl-item food" data-loc="9" onclick="flyTo(9)">
                    <div class="tl-time">18:30 ‚Äì 20:00</div>
                    <div class="tl-name">‡∏†‡∏±‡∏ï‡∏ï‡∏≤‡∏Ñ‡∏≤‡∏£‡πÄ‡∏à‡∏µ‡πà‡∏¢‡∏ó‡πâ‡∏á‡πÄ‡∏Æ‡∏á</div>
                    <div class="tl-name-th">Jia Thong Heng ¬∑ Suckling pig dinner</div>
                    <div class="tl-desc">Classic Chiang Mai Chinese-Thai restaurant. Order the signature ‡∏´‡∏°‡∏π‡∏´‡∏±‡∏ô (suckling pig). East of city, ~15 min from Baristro.</div>
                    <span class="tl-tag food">Dinner ¬∑ Suckling Pig üê∑</span>
                    <a class="tl-nav" href="https://maps.google.com/?q=Q2J2%2BMJ+Chiang+Mai" target="_blank">Navigate ‚Üó</a>
                </div>
                <div class="tl-item hotel" data-loc="2" onclick="flyTo(2)">
                    <div class="tl-time">20:30</div>
                    <div class="tl-name">Return to ibis Styles</div>
                    <div class="tl-desc">Night 2. Rest up for Sunday referendum.</div>
                    <span class="tl-tag hotel">Hotel ¬∑ Night 2</span>
                </div>
            </div>
        </section>

        <!-- ‚ïê‚ïê‚ïê SUNDAY ‚ïê‚ïê‚ïê -->
        <section class="day-section">
            <div class="day-header">
                <span class="day-badge sun">SUN</span>
                <span class="day-title">Referendum ¬∑ Old City ¬∑ Coffee ¬∑ Departure</span>
                <span class="day-date">8 February 2026</span>
            </div>
            <div class="timeline">
                <div class="tl-item civic" data-loc="10" onclick="flyTo(10)">
                    <div class="tl-time">08:00 ‚Äì 09:30</div>
                    <div class="tl-name">‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏°‡∏ï‡∏¥ ‚Äî ‡∏™‡πÇ‡∏°‡∏™‡∏£ Land &amp; Houses Park</div>
                    <div class="tl-name-th">V287+C69 ¬∑ Nong Chom, San Sai</div>
                    <div class="tl-desc">~20 min drive northeast. Go early to avoid queues.</div>
                    <span class="tl-tag civic">Referendum</span>
                    <a class="tl-nav" href="https://maps.google.com/?q=V287%2BC69+Nong+Chom+San+Sai+Chiang+Mai" target="_blank">Navigate ‚Üó</a>
                </div>
                <div class="tl-item hotel" data-loc="2" onclick="flyTo(2)">
                    <div class="tl-time">10:00</div>
                    <div class="tl-name">Check out ‚Äî ibis Styles</div>
                    <div class="tl-desc">Pack up and check out. Store luggage at the front desk for the day.</div>
                    <span class="tl-tag hotel">Check Out</span>
                </div>
                <div class="tl-item food" data-loc="11" onclick="flyTo(11)">
                    <div class="tl-time">10:30 ‚Äì 11:15</div>
                    <div class="tl-name">Sandwich Bar</div>
                    <div class="tl-name-th">QXVH+VF ¬∑ Old city area</div>
                    <div class="tl-desc">Brunch near the old city. Great sandwiches to start the last day.</div>
                    <span class="tl-tag food">Brunch</span>
                    <a class="tl-nav" href="https://maps.google.com/?q=QXVH%2BVF+Chiang+Mai" target="_blank">Navigate ‚Üó</a>
                </div>
                <div class="tl-item temple" data-loc="12" onclick="flyTo(12)">
                    <div class="tl-time">11:30 ‚Äì 12:15</div>
                    <div class="tl-name">‡∏ß‡∏±‡∏î‡∏î‡∏±‡∏ö‡∏†‡∏±‡∏¢ (Wat Dap Phai)</div>
                    <div class="tl-desc">Serene old-city temple, a short walk from Sandwich Bar. Peaceful late-morning visit.</div>
                    <span class="tl-tag temple">Temple</span>
                    <a class="tl-nav" href="https://maps.google.com/?q=QXVJ%2B5J+Chiang+Mai" target="_blank">Navigate ‚Üó</a>
                </div>
                <div class="tl-item food" data-loc="13" onclick="flyTo(13)">
                    <div class="tl-time">12:30 ‚Äì 13:30</div>
                    <div class="tl-name">Baan Landai</div>
                    <div class="tl-name-th">QXVP+JX ¬∑ Near the old city</div>
                    <div class="tl-desc">Lunch in the old city area. Northern Thai cuisine in a charming setting.</div>
                    <span class="tl-tag food">Lunch</span>
                    <a class="tl-nav" href="https://maps.google.com/?q=QXVP%2BJX+Chiang+Mai" target="_blank">Navigate ‚Üó</a>
                </div>
                <div class="tl-item coffee" data-loc="14" onclick="flyTo(14)">
                    <div class="tl-time">14:00 ‚Äì 14:30</div>
                    <div class="tl-name">Roast8ry Coffee Flagship</div>
                    <div class="tl-desc">Walk to Nimman for specialty coffee. Industrial-chic interiors.</div>
                    <span class="tl-tag coffee">Coffee</span>
                    <a class="tl-nav" href="https://maps.google.com/?q=QXV9%2BX9+Chiang+Mai" target="_blank">Navigate ‚Üó</a>
                </div>
                <div class="tl-item coffee" data-loc="15" onclick="flyTo(15)">
                    <div class="tl-time">14:45 ‚Äì 15:15</div>
                    <div class="tl-name">GRAPH One Nimman</div>
                    <div class="tl-desc">Short stroll from Roast8ry. Iconic cafe in the One Nimman complex.</div>
                    <span class="tl-tag coffee">Coffee</span>
                    <a class="tl-nav" href="https://maps.google.com/?q=QXX9%2BX7+Chiang+Mai" target="_blank">Navigate ‚Üó</a>
                </div>
                <div class="tl-item coffee" data-loc="16" onclick="flyTo(16)">
                    <div class="tl-time">15:30 ‚Äì 16:00</div>
                    <div class="tl-name">Ristr8to Original</div>
                    <div class="tl-desc">World Latte Art champion's flagship. A few steps from GRAPH.</div>
                    <span class="tl-tag coffee">Coffee</span>
                    <a class="tl-nav" href="https://maps.google.com/?q=QXX8%2BMV+Chiang+Mai" target="_blank">Navigate ‚Üó</a>
                </div>
                <div class="tl-item food" data-loc="17" onclick="flyTo(17)">
                    <div class="tl-time">16:30 ‚Äì 17:30</div>
                    <div class="tl-name">CHOW CHOW Thai Contemporary Food</div>
                    <div class="tl-name-th">Q2P3+C5 ¬∑ East side</div>
                    <div class="tl-desc">Light late-afternoon meal. Modern Thai kitchen, east of the city. ~15 min from Nimman.</div>
                    <span class="tl-tag food">Afternoon Meal</span>
                    <a class="tl-nav" href="https://maps.google.com/?q=Q2P3%2BC5+Chiang+Mai" target="_blank">Navigate ‚Üó</a>
                </div>
                <div class="tl-item drive">
                    <div class="tl-time">18:30</div>
                    <div class="tl-name">üöó Pick up luggage from ibis &amp; head to airport</div>
                    <div class="tl-desc">Allow ~30 min total. Domestic check-in recommended 1.5 hrs before departure.</div>
                    <span class="tl-tag drive">Drive ¬∑ ~30 min</span>
                </div>
                <div class="tl-item airport" data-loc="0" onclick="flyTo(0)">
                    <div class="tl-time">21:05 ‚Äî Depart</div>
                    <div class="tl-name">‚úà Chiang Mai International ‚Üí Suvarnabhumi</div>
                    <div class="tl-name-th">CNX ‚Üí BKK ¬∑ Nonstop ¬∑ Ref: FNQF5K</div>
                    <div class="flight-row">
                        <span class="flight-code">CNX</span>
                        <span class="flight-arrow">‚Üí</span>
                        <span class="flight-code">BKK</span>
                        <span class="flight-time" style="margin-left:auto">21:05 ‚Äì 22:25</span>
                    </div>
                    <span class="tl-tag airport">Departure</span>
                </div>
            </div>
        </section>

        <div class="note-card">
            <strong>üìå Saturday timing:</strong> The critical constraint is ‡∏•‡∏≤‡∏ö‡∏ö‡∏±‡∏ß‡∏ï‡∏≠‡∏á's last order at ~14:30 (Saturday only). This itinerary has you arriving by 11:30 ‚Äî well within the window. After that you proceed to ‡∏û‡∏£‡∏∞‡∏ò‡∏≤‡∏ï‡∏∏‡∏î‡∏≠‡∏¢‡∏Ñ‡∏≥ for a full 3.5 hours of unhurried prayer in beautiful afternoon light, followed by coffee and suckling pig for dinner.
        </div>

        <footer>Generated for Tanat ¬∑ Feb 2026 ¬∑ Map data ¬© OpenStreetMap contributors ¬∑ Tiles ¬© CARTO</footer>
    </div>

    <script>
    const LOCATIONS = [
        { id:0,  name:"Chiang Mai Airport (CNX)", nameTh:"‡∏ó‡πà‡∏≤‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏¢‡∏≤‡∏ô‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà", lat:18.7668, lng:98.9625, type:"airport", day:"fri/sun" },
        { id:1,  name:"Penn.izakaya", nameTh:"", lat:18.803312, lng:98.984813, type:"izakaya", day:"fri", plusCode:"RX3M+8W" },
        { id:2,  name:"ibis Styles Chiang Mai", nameTh:"Agoda #1979064961", lat:18.806188, lng:98.960062, type:"hotel", day:"fri-sun", plusCode:"RX46+F2" },
        { id:3,  name:"Wat Thung Luang", nameTh:"‡∏ß‡∏±‡∏î‡∏ó‡∏∏‡πà‡∏á‡∏´‡∏•‡∏ß‡∏á ¬∑ Mae Taeng", lat:19.154938, lng:98.931562, type:"temple", day:"sat", plusCode:"5W3J+XJ" },
        { id:4,  name:"Laab Ton Kham", nameTh:"‡∏•‡∏≤‡∏ö‡∏ï‡πâ‡∏ô‡∏Ç‡∏≤‡∏°", lat:19.138688, lng:98.947312, type:"food", day:"sat", plusCode:"4WQW+FW" },
        { id:5,  name:"Pharmacy CMU", nameTh:"‡∏£‡πâ‡∏≤‡∏ô‡∏¢‡∏≤‡∏´‡∏ô‡πâ‡∏≤ ‡∏°.‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà", lat:18.808438, lng:98.954937, type:"pharmacy", day:"sat", plusCode:"RX53+9X" },
        { id:6,  name:"Laab Bua Tong", nameTh:"‡∏•‡∏≤‡∏ö‡∏ö‡∏±‡∏ß‡∏ï‡∏≠‡∏á (Sat only, LO 14:30)", lat:18.789563, lng:99.028813, type:"food", day:"sat", plusCode:"Q2QH+RG" },
        { id:7,  name:"Phra That Doi Kham", nameTh:"‡∏û‡∏£‡∏∞‡∏ò‡∏≤‡∏ï‡∏∏‡∏î‡∏≠‡∏¢‡∏Ñ‡∏≥", lat:18.759437, lng:98.918688, type:"temple", day:"sat", plusCode:"QW59+QF" },
        { id:8,  name:"The Baristro Asian Style", nameTh:"", lat:18.789938, lng:98.951688, type:"coffee", day:"sat", plusCode:"QXQ2+XM" },
        { id:9,  name:"Jia Thong Heng", nameTh:"‡∏†‡∏±‡∏ï‡∏ï‡∏≤‡∏Ñ‡∏≤‡∏£‡πÄ‡∏à‡∏µ‡πà‡∏¢‡∏ó‡πâ‡∏á‡πÄ‡∏Æ‡∏á ¬∑ ‡∏´‡∏°‡∏π‡∏´‡∏±‡∏ô", lat:18.781687, lng:99.001562, type:"food", day:"sat", plusCode:"Q2J2+MJ" },
        { id:10, name:"‡∏™‡πÇ‡∏°‡∏™‡∏£ Land & Houses Park", nameTh:"‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏°‡∏ï‡∏¥ ¬∑ San Sai", lat:18.866038, lng:99.013109, type:"civic", day:"sun", plusCode:"V287+C69" },
        { id:11, name:"Sandwich Bar", nameTh:"", lat:18.794688, lng:98.978687, type:"food", day:"sun", plusCode:"QXVH+VF" },
        { id:12, name:"Wat Dap Phai", nameTh:"‡∏ß‡∏±‡∏î‡∏î‡∏±‡∏ö‡∏†‡∏±‡∏¢", lat:18.792938, lng:98.981562, type:"temple", day:"sun", plusCode:"QXVJ+5J" },
        { id:13, name:"Baan Landai", nameTh:"", lat:18.794063, lng:98.987437, type:"food", day:"sun", plusCode:"QXVP+JX" },
        { id:14, name:"Roast8ry Coffee Flagship", nameTh:"", lat:18.794938, lng:98.968437, type:"coffee", day:"sun", plusCode:"QXV9+X9" },
        { id:15, name:"GRAPH One Nimman", nameTh:"", lat:18.799937, lng:98.968187, type:"coffee", day:"sun", plusCode:"QXX9+X7" },
        { id:16, name:"Ristr8to Original", nameTh:"", lat:18.799188, lng:98.967187, type:"coffee", day:"sun", plusCode:"QXX8+MV" },
        { id:17, name:"CHOW CHOW Thai Contemporary", nameTh:"", lat:18.786062, lng:99.002938, type:"food", day:"sun", plusCode:"Q2P3+C5" },
    ];

    const COLORS = {
        temple:'#e8a849', food:'#e05a4f', coffee:'#b07d56', hotel:'#5a8fd4',
        civic:'#8b6cc1', airport:'#5db882', pharmacy:'#4fc1a6', izakaya:'#d46a8b'
    };
    const EMOJIS = {
        temple:'üõï', food:'üçú', coffee:'‚òï', hotel:'üè®',
        civic:'üó≥Ô∏è', airport:'‚úàÔ∏è', pharmacy:'üíä', izakaya:'üç∂'
    };

    const map = L.map('map', { center:[18.82,98.97], zoom:11, zoomControl:true });
    L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
        attribution:'¬© <a href="https://www.openstreetmap.org/copyright">OSM</a> ¬© <a href="https://carto.com/">CARTO</a>',
        subdomains:'abcd', maxZoom:19
    }).addTo(map);

    const markers = [];
    LOCATIONS.forEach(loc => {
        const color = COLORS[loc.type]||'#888';
        const emoji = EMOJIS[loc.type]||'üìç';
        const icon = L.divIcon({
            className:'custom-div-icon',
            html:`<div class="custom-marker" style="background:${color}"><span>${emoji}</span></div>`,
            iconSize:[28,36], iconAnchor:[14,36], popupAnchor:[0,-36]
        });
        const gmq = loc.plusCode
            ? `https://maps.google.com/?q=${encodeURIComponent(loc.plusCode+' Chiang Mai')}`
            : `https://maps.google.com/?q=${loc.lat},${loc.lng}`;
        const marker = L.marker([loc.lat,loc.lng],{icon}).addTo(map).bindPopup(`
            <div class="popup-title">${loc.name}</div>
            ${loc.nameTh?`<div class="popup-sub">${loc.nameTh}</div>`:''}
            <div class="popup-sub" style="text-transform:capitalize">${loc.type} ¬∑ ${loc.day}</div>
            <a class="popup-link" href="${gmq}" target="_blank">Open in Google Maps ‚Üó</a>
        `);
        markers.push(marker);
    });

    map.fitBounds(L.featureGroup(markers).getBounds().pad(0.08));

    // Saturday route (gold dashed)
    L.polyline([
        [18.806188,98.960062],[19.154938,98.931562],[19.138688,98.947312],
        [18.808438,98.954937],[18.789563,99.028813],[18.759437,98.918688],
        [18.789938,98.951688],[18.781687,99.001562],[18.806188,98.960062]
    ],{color:'#e8a849',weight:1.5,opacity:0.3,dashArray:'6 4'}).addTo(map);

    // Sunday route (purple dashed)
    L.polyline([
        [18.806188,98.960062],[18.866038,99.013109],[18.806188,98.960062],
        [18.794688,98.978687],[18.792938,98.981562],[18.794063,98.987437],
        [18.794938,98.968437],[18.799937,98.968187],[18.799188,98.967187],
        [18.786062,99.002938],[18.7668,98.9625]
    ],{color:'#8b6cc1',weight:1.5,opacity:0.25,dashArray:'6 4'}).addTo(map);

    function flyTo(id) {
        const loc = LOCATIONS[id];
        if(loc){map.flyTo([loc.lat,loc.lng],15,{duration:1});markers[id].openPopup();}
    }

    const pts = LOCATIONS.filter(l=>l.id!==0).slice(0,9).map(l=>`${l.lat},${l.lng}`);
    document.getElementById('gmaps-link').href = `https://www.google.com/maps/dir/${pts.join('/')}`;

    function exportGeoJSON(){
        const gj = {type:"FeatureCollection",features:LOCATIONS.map(l=>({
            type:"Feature",
            properties:{name:l.name,nameTh:l.nameTh,type:l.type,day:l.day,plusCode:l.plusCode||''},
            geometry:{type:"Point",coordinates:[l.lng,l.lat]}
        }))};
        dl('chiangmai-trip-feb2026.geojson',JSON.stringify(gj,null,2),'application/geo+json');
    }

    function exportKML(){
        const pm = LOCATIONS.map(l=>{
            const nm = esc(l.name)+(l.nameTh?' ('+esc(l.nameTh)+')':'');
            const c = kc(COLORS[l.type]||'#888888');
            return '  <Placemark>\n    <name>'+nm+'</name>\n    <description>'+esc(l.type)+' - '+esc(l.day)+'</description>\n    <Style><IconStyle><color>'+c+'</color><scale>1.2</scale></IconStyle></Style>\n    <Point><coordinates>'+l.lng+','+l.lat+',0</coordinates></Point>\n  </Placemark>';
        }).join('\n');
        const kml='<?xml version="1.0" encoding="UTF-8"?>\n<kml xmlns="http://www.opengis.net/kml/2.2">\n<Document>\n  <name>Chiang Mai Trip - Feb 6-8, 2026</name>\n  <description>Temples, Laab, Coffee, Izakaya</description>\n'+pm+'\n</Document>\n</kml>';
        dl('chiangmai-trip-feb2026.kml',kml,'application/vnd.google-earth.kml+xml');
    }

    function esc(s){return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');}
    function kc(h){const r=h.slice(1,3),g=h.slice(3,5),b=h.slice(5,7);return 'ff'+b+g+r;}
    function dl(n,c,m){const a=document.createElement('a');a.href=URL.createObjectURL(new Blob([c],{type:m}));a.download=n;a.click();URL.revokeObjectURL(a.href);}
    </script>
</body>
</html>
