<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à 72 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡πÉ‡∏ô‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà | Chiang Mai Expedition Feb 6-8, 2026</title>
    
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='40' fill='%23c89b3c'/%3E%3Ctext x='50' y='62' text-anchor='middle' fill='%230a0604' font-size='32' font-weight='bold'%3Eüõï%3C/text%3E%3C/svg%3E">
    
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Sarabun:wght@300;400;600;700&family=Noto+Sans+Thai:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    
    <style>
        @layer base, layout, components, utilities, animations;

        @layer base {
            :root {
                --void: #0a0604;
                --surface: #1a100b;
                --surface-elevated: #241810;
                --gold-primary: #c89b3c;
                --gold-bright: #e8c060;
                --gold-dim: #8b6914;
                --gold-glow: rgba(200, 155, 60, 0.15);
                --text-cream: #f5e6c8;
                --text-muted: #8a7560;
                --text-dim: #5a4a3a;
                --glass-border: rgba(200, 155, 60, 0.15);
                --glass-border-active: rgba(200, 155, 60, 0.4);
                
                --temple-gold: #e8a849;
                --food-red: #e05a4f;
                --coffee-brown: #b07d56;
                --hotel-blue: #5a8fd4;
                --civic-purple: #8b6cc1;
                --airport-green: #5db882;
                --pharmacy-teal: #4fc1a6;
                --izakaya-pink: #d46a8b;
                
                --day-fri: #5a8fd4;
                --day-sat: #e8a849;
                --day-sun: #8b6cc1;
                
                --ease-temple: cubic-bezier(0.16, 1, 0.3, 1);
                --radius: 12px;
                --radius-sm: 8px;
            }
            
            * { box-sizing: border-box; margin: 0; padding: 0; }
            
            html { scroll-behavior: smooth; }
            
            body {
                background: var(--void);
                color: var(--text-cream);
                font-family: 'Sarabun', 'Noto Sans Thai', sans-serif;
                line-height: 1.7;
                overflow-x: hidden;
                -webkit-font-smoothing: antialiased;
            }
            
            /* i18n System */
            [lang="th"] { display: none; }
            body[data-lang="th"] [lang="en"] { display: none; }
            body[data-lang="th"] [lang="th"] { display: block; }
            
            ::selection {
                background: var(--gold-primary);
                color: var(--void);
            }
            
            ::-webkit-scrollbar { width: 8px; height: 8px; }
            ::-webkit-scrollbar-track { background: var(--void); }
            ::-webkit-scrollbar-thumb { background: var(--gold-dim); border-radius: 4px; }
            ::-webkit-scrollbar-thumb:hover { background: var(--gold-primary); }
        }

        @layer layout {
            .container { max-width: 1400px; margin: 0 auto; padding: 0 1.5rem; }
            
            .main-grid {
                display: grid;
                grid-template-columns: 420px 1fr;
                gap: 0;
                min-height: 100vh;
            }
            
            @media (max-width: 1024px) {
                .main-grid {
                    grid-template-columns: 1fr;
                }
            }
            
            .sidebar {
                background: var(--surface);
                border-right: 1px solid var(--glass-border);
                height: 100vh;
                overflow-y: auto;
                position: sticky;
                top: 0;
            }
            
            @media (max-width: 1024px) {
                .sidebar {
                    height: auto;
                    position: relative;
                    border-right: none;
                    border-bottom: 1px solid var(--glass-border);
                }
            }
            
            .content-area {
                display: flex;
                flex-direction: column;
            }
            
            .map-section {
                height: 55vh;
                min-height: 400px;
                position: relative;
            }
            
            .narrative-section {
                flex: 1;
                padding: 2rem;
                overflow-y: auto;
            }
        }

        @layer components {
            /* Header */
            .header {
                background: linear-gradient(180deg, var(--surface-elevated) 0%, var(--surface) 100%);
                padding: 1.5rem;
                border-bottom: 1px solid var(--glass-border);
                position: sticky;
                top: 0;
                z-index: 100;
            }
            
            .header-title {
                font-family: 'Cinzel', serif;
                font-size: 1.5rem;
                font-weight: 700;
                color: var(--text-cream);
                letter-spacing: 0.02em;
                margin-bottom: 0.25rem;
            }
            
            .header-title .accent { color: var(--gold-primary); }
            
            .header-subtitle {
                font-size: 0.85rem;
                color: var(--text-muted);
            }
            
            /* Reference Chips */
            .ref-bar {
                display: flex;
                flex-wrap: wrap;
                gap: 0.5rem;
                padding: 1rem 1.5rem;
                background: var(--void);
                border-bottom: 1px solid var(--glass-border);
            }
            
            .ref-chip {
                display: inline-flex;
                align-items: center;
                gap: 0.4rem;
                background: var(--surface);
                border: 1px solid var(--glass-border);
                border-radius: 99px;
                padding: 0.35rem 0.75rem;
                font-size: 0.72rem;
                color: var(--text-muted);
                transition: all 0.2s var(--ease-temple);
            }
            
            .ref-chip:hover {
                border-color: var(--gold-primary);
                background: var(--gold-glow);
            }
            
            .ref-chip .label { color: var(--text-dim); }
            .ref-chip .val { 
                font-family: 'JetBrains Mono', monospace; 
                color: var(--gold-primary); 
                letter-spacing: 0.03em; 
            }
            
            /* Glass Panel */
            .glass-panel {
                background: rgba(26, 16, 11, 0.85);
                backdrop-filter: blur(20px);
                border: 1px solid var(--glass-border);
                border-radius: var(--radius);
                box-shadow: 0 8px 32px rgba(0,0,0,0.4);
                transition: all 0.3s var(--ease-temple);
            }
            
            .glass-panel:hover {
                border-color: var(--glass-border-active);
            }
            
            /* Day Sections */
            .day-section { margin-bottom: 1.5rem; }
            
            .day-header {
                display: flex;
                align-items: center;
                gap: 0.7rem;
                padding: 0.75rem 1.5rem;
                background: var(--void);
                border-bottom: 1px solid var(--glass-border);
                position: sticky;
                top: 0;
                z-index: 50;
            }
            
            .day-badge {
                font-size: 0.62rem;
                font-weight: 700;
                text-transform: uppercase;
                letter-spacing: 0.1em;
                padding: 0.2rem 0.55rem;
                border-radius: 99px;
                border: 1px solid;
            }
            
            .day-badge.fri { color: var(--day-fri); border-color: rgba(90,143,212,0.3); background: rgba(90,143,212,0.08); }
            .day-badge.sat { color: var(--day-sat); border-color: rgba(232,168,73,0.3); background: rgba(232,168,73,0.08); }
            .day-badge.sun { color: var(--day-sun); border-color: rgba(139,108,193,0.3); background: rgba(139,108,193,0.08); }
            
            .day-title {
                font-weight: 600;
                font-size: 0.92rem;
                color: var(--text-cream);
            }
            
            .day-date {
                color: var(--text-muted);
                font-size: 0.75rem;
                margin-left: auto;
                font-family: 'JetBrains Mono', monospace;
            }
            
            /* Timeline */
            .timeline {
                position: relative;
                padding: 0.5rem 1.5rem 1rem 2.5rem;
            }
            
            .timeline::before {
                content: '';
                position: absolute;
                left: 1.75rem;
                top: 0.5rem;
                bottom: 0.5rem;
                width: 1px;
                background: linear-gradient(180deg, var(--glass-border) 0%, transparent 100%);
            }
            
            /* Location Card */
            .location-card {
                position: relative;
                margin-bottom: 0.75rem;
                padding: 0.85rem 1rem;
                background: var(--surface);
                border: 1px solid var(--glass-border);
                border-radius: var(--radius-sm);
                cursor: pointer;
                transition: all 0.25s var(--ease-temple);
            }
            
            .location-card::before {
                content: '';
                position: absolute;
                left: -1.25rem;
                top: 1rem;
                width: 10px;
                height: 10px;
                border-radius: 50%;
                border: 2px solid var(--gold-primary);
                background: var(--void);
                transition: all 0.2s;
            }
            
            .location-card:hover {
                border-color: var(--gold-primary);
                background: var(--surface-elevated);
                transform: translateX(4px);
            }
            
            .location-card:hover::before {
                background: var(--gold-primary);
                box-shadow: 0 0 12px var(--gold-primary);
            }
            
            .location-card.active {
                border-color: var(--gold-bright);
                background: var(--gold-glow);
            }
            
            .location-card.active::before {
                background: var(--gold-bright);
                box-shadow: 0 0 16px var(--gold-bright);
            }
            
            /* Location Card Type Colors */
            .location-card[data-type="temple"]::before { border-color: var(--temple-gold); }
            .location-card[data-type="food"]::before { border-color: var(--food-red); }
            .location-card[data-type="coffee"]::before { border-color: var(--coffee-brown); }
            .location-card[data-type="hotel"]::before { border-color: var(--hotel-blue); }
            .location-card[data-type="civic"]::before { border-color: var(--civic-purple); }
            .location-card[data-type="airport"]::before { border-color: var(--airport-green); }
            .location-card[data-type="pharmacy"]::before { border-color: var(--pharmacy-teal); }
            .location-card[data-type="izakaya"]::before { border-color: var(--izakaya-pink); }
            .location-card[data-type="drive"]::before { border-color: var(--text-dim); }
            
            .location-time {
                font-size: 0.68rem;
                color: var(--text-dim);
                font-weight: 500;
                text-transform: uppercase;
                letter-spacing: 0.04em;
                margin-bottom: 0.15rem;
                font-family: 'JetBrains Mono', monospace;
            }
            
            .location-name {
                font-weight: 600;
                font-size: 0.9rem;
                color: var(--text-cream);
                margin-bottom: 0.1rem;
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }
            
            .location-name-th {
                font-size: 0.78rem;
                color: var(--text-muted);
                font-family: 'Noto Sans Thai', 'Sarabun', sans-serif;
                margin-bottom: 0.2rem;
            }
            
            .location-desc {
                font-size: 0.76rem;
                color: var(--text-muted);
                line-height: 1.5;
            }
            
            .location-pluscode {
                font-family: 'JetBrains Mono', monospace;
                font-size: 0.65rem;
                color: var(--gold-dim);
                background: var(--gold-glow);
                padding: 0.2rem 0.5rem;
                border-radius: 4px;
                display: inline-block;
                margin-top: 0.4rem;
            }
            
            /* Tags */
            .tag {
                display: inline-block;
                font-size: 0.58rem;
                font-weight: 600;
                text-transform: uppercase;
                letter-spacing: 0.07em;
                padding: 0.12rem 0.45rem;
                border-radius: 99px;
                margin-top: 0.35rem;
                margin-right: 0.25rem;
            }
            
            .tag-temple { color: var(--temple-gold); background: rgba(232,168,73,0.1); }
            .tag-food { color: var(--food-red); background: rgba(224,90,79,0.1); }
            .tag-coffee { color: var(--coffee-brown); background: rgba(176,125,86,0.1); }
            .tag-hotel { color: var(--hotel-blue); background: rgba(90,143,212,0.1); }
            .tag-civic { color: var(--civic-purple); background: rgba(139,108,193,0.1); }
            .tag-airport { color: var(--airport-green); background: rgba(93,184,130,0.1); }
            .tag-pharmacy { color: var(--pharmacy-teal); background: rgba(79,193,166,0.1); }
            .tag-izakaya { color: var(--izakaya-pink); background: rgba(212,106,139,0.1); }
            .tag-drive { color: var(--text-dim); background: rgba(255,255,255,0.04); }
            .tag-warn { color: #e8a849; background: rgba(232,168,73,0.12); border: 1px solid rgba(232,168,73,0.3); }
            
            /* Alert Card */
            .alert-card {
                background: rgba(232,168,73,0.08);
                border: 1px solid rgba(232,168,73,0.25);
                border-radius: var(--radius-sm);
                padding: 0.75rem 1rem;
                margin: 0.5rem 0;
                font-size: 0.78rem;
            }
            
            .alert-title {
                font-weight: 600;
                color: var(--gold-primary);
                margin-bottom: 0.25rem;
            }
            
            /* Map */
            #map {
                width: 100%;
                height: 100%;
                background: var(--void);
            }
            
            .map-legend {
                position: absolute;
                bottom: 20px;
                left: 20px;
                z-index: 1000;
                background: rgba(10, 6, 4, 0.92);
                backdrop-filter: blur(12px);
                border: 1px solid var(--glass-border);
                border-radius: var(--radius-sm);
                padding: 0.75rem 1rem;
                display: flex;
                flex-wrap: wrap;
                gap: 0.5rem 1rem;
                font-size: 0.68rem;
                color: var(--text-muted);
                max-width: 320px;
            }
            
            .legend-item {
                display: flex;
                align-items: center;
                gap: 0.35rem;
            }
            
            .legend-dot {
                width: 10px;
                height: 10px;
                border-radius: 50%;
                border: 2px solid currentColor;
            }
            
            .map-controls {
                position: absolute;
                top: 20px;
                right: 20px;
                z-index: 1000;
                display: flex;
                flex-direction: column;
                gap: 0.5rem;
            }
            
            .map-btn {
                display: inline-flex;
                align-items: center;
                gap: 0.35rem;
                background: var(--surface);
                border: 1px solid var(--glass-border);
                color: var(--text-muted);
                padding: 0.5rem 0.85rem;
                border-radius: 99px;
                font-size: 0.72rem;
                cursor: pointer;
                text-decoration: none;
                transition: all 0.2s var(--ease-temple);
                font-family: inherit;
            }
            
            .map-btn:hover {
                border-color: var(--gold-primary);
                color: var(--gold-primary);
                background: var(--gold-glow);
            }
            
            .map-btn-primary {
                background: var(--gold-primary);
                color: var(--void);
                border-color: var(--gold-primary);
            }
            
            .map-btn-primary:hover {
                background: var(--gold-bright);
                border-color: var(--gold-bright);
                color: var(--void);
            }
            
            /* Custom Leaflet Markers */
            .custom-marker {
                display: flex;
                align-items: center;
                justify-content: center;
                width: 32px;
                height: 32px;
                border-radius: 50% 50% 50% 0;
                transform: rotate(-45deg);
                border: 2px solid #fff;
                box-shadow: 0 3px 10px rgba(0,0,0,0.5);
            }
            
            .custom-marker span {
                transform: rotate(45deg);
                font-size: 14px;
            }
            
            .leaflet-popup-content-wrapper {
                background: var(--surface) !important;
                color: var(--text-cream) !important;
                border: 1px solid var(--glass-border) !important;
                border-radius: var(--radius-sm) !important;
                box-shadow: 0 8px 32px rgba(0,0,0,0.5) !important;
            }
            
            .leaflet-popup-tip {
                background: var(--surface) !important;
            }
            
            .leaflet-popup-content {
                font-family: 'Sarabun', 'Noto Sans Thai', sans-serif !important;
                font-size: 13px !important;
                margin: 12px 16px !important;
            }
            
            .popup-title {
                font-weight: 700;
                font-size: 0.95rem;
                margin-bottom: 4px;
                color: var(--text-cream);
            }
            
            .popup-subtitle {
                font-size: 0.8rem;
                color: var(--text-muted);
                margin-bottom: 6px;
            }
            
            .popup-link {
                font-size: 0.75rem;
                color: var(--gold-primary);
                text-decoration: none;
            }
            
            .popup-link:hover {
                text-decoration: underline;
            }
            
            /* Narrative Section */
            .narrative-header {
                text-align: center;
                padding: 2rem 0;
                border-bottom: 1px solid var(--glass-border);
                margin-bottom: 2rem;
            }
            
            .narrative-title {
                font-family: 'Cinzel', serif;
                font-size: clamp(1.5rem, 3vw, 2rem);
                font-weight: 700;
                color: var(--text-cream);
                margin-bottom: 0.5rem;
            }
            
            .narrative-title .gold { color: var(--gold-primary); }
            
            .narrative-subtitle {
                font-size: 0.9rem;
                color: var(--text-muted);
            }
            
            .narrative-content {
                max-width: 800px;
                margin: 0 auto;
            }
            
            .narrative-section-title {
                font-family: 'Cinzel', serif;
                font-size: 1.25rem;
                font-weight: 600;
                color: var(--gold-primary);
                margin: 2rem 0 1rem;
                padding-bottom: 0.5rem;
                border-bottom: 1px solid var(--glass-border);
            }
            
            .narrative-text {
                font-size: 1rem;
                line-height: 1.9;
                color: var(--text-cream);
                margin-bottom: 1rem;
            }
            
            .narrative-text .highlight {
                color: var(--gold-primary);
                font-weight: 600;
            }
            
            .narrative-text .location-link {
                color: var(--gold-bright);
                cursor: pointer;
                text-decoration: underline;
                text-decoration-style: dotted;
                text-underline-offset: 3px;
                transition: all 0.2s;
            }
            
            .narrative-text .location-link:hover {
                color: var(--gold-primary);
                text-decoration-style: solid;
            }
            
            .narrative-quote {
                background: var(--gold-glow);
                border-left: 3px solid var(--gold-primary);
                padding: 1rem 1.5rem;
                margin: 1.5rem 0;
                font-style: italic;
                color: var(--text-muted);
                border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
            }
            
            /* Tabs */
            .tabs-container {
                margin: 2rem 0;
            }
            
            .tabs-header {
                display: flex;
                gap: 0.5rem;
                border-bottom: 1px solid var(--glass-border);
                padding-bottom: 0;
                overflow-x: auto;
            }
            
            .tab-btn {
                padding: 0.75rem 1.25rem;
                background: transparent;
                border: none;
                color: var(--text-muted);
                font-size: 0.85rem;
                font-weight: 500;
                cursor: pointer;
                border-bottom: 2px solid transparent;
                transition: all 0.2s;
                white-space: nowrap;
                font-family: inherit;
            }
            
            .tab-btn:hover {
                color: var(--text-cream);
            }
            
            .tab-btn.active {
                color: var(--gold-primary);
                border-bottom-color: var(--gold-primary);
            }
            
            .tab-content {
                display: none;
                padding: 1.5rem 0;
            }
            
            .tab-content.active {
                display: block;
            }
            
            /* Embed Containers */
            .embed-container {
                background: var(--surface);
                border: 1px solid var(--glass-border);
                border-radius: var(--radius);
                overflow: hidden;
                margin: 1.5rem 0;
            }
            
            .embed-header {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 0.75rem 1rem;
                background: var(--void);
                border-bottom: 1px solid var(--glass-border);
            }
            
            .embed-title {
                font-size: 0.85rem;
                font-weight: 600;
                color: var(--text-cream);
                display: flex;
                align-items: center;
                gap: 0.5rem;
            }
            
            .embed-body {
                padding: 1rem;
            }
            
            .embed-body.no-padding {
                padding: 0;
            }
            
            /* Video Embed */
            .video-wrapper {
                position: relative;
                padding-bottom: 56.25%;
                height: 0;
                overflow: hidden;
                border-radius: var(--radius-sm);
            }
            
            .video-wrapper iframe {
                position: absolute;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                border: none;
            }
            
            /* Audio Player */
            .audio-player {
                display: flex;
                align-items: center;
                gap: 1rem;
                padding: 1rem;
                background: var(--void);
                border-radius: var(--radius-sm);
            }
            
            .audio-player audio {
                flex: 1;
                height: 40px;
            }
            
            audio::-webkit-media-controls-panel {
                background: var(--surface);
            }
            
            /* PDF Viewer */
            .pdf-viewer {
                width: 100%;
                height: 500px;
                border: none;
                background: var(--void);
            }
            
            .pdf-flipbook {
                display: flex;
                flex-direction: column;
                align-items: center;
                gap: 1rem;
            }
            
            .pdf-canvas-container {
                position: relative;
                perspective: 1500px;
            }
            
            .pdf-canvas {
                max-width: 100%;
                height: auto;
                border-radius: var(--radius-sm);
                box-shadow: 0 10px 40px rgba(0,0,0,0.5);
                transition: transform 0.6s var(--ease-temple);
            }
            
            .pdf-controls {
                display: flex;
                align-items: center;
                gap: 1rem;
            }
            
            .pdf-nav-btn {
                padding: 0.5rem 1rem;
                background: var(--surface);
                border: 1px solid var(--glass-border);
                color: var(--text-cream);
                border-radius: var(--radius-sm);
                cursor: pointer;
                transition: all 0.2s;
                font-family: inherit;
            }
            
            .pdf-nav-btn:hover:not(:disabled) {
                background: var(--gold-glow);
                border-color: var(--gold-primary);
            }
            
            .pdf-nav-btn:disabled {
                opacity: 0.5;
                cursor: not-allowed;
            }
            
            .pdf-page-info {
                font-size: 0.85rem;
                color: var(--text-muted);
                font-family: 'JetBrains Mono', monospace;
            }
            
            /* Carousel */
            .carousel {
                position: relative;
                overflow: hidden;
                border-radius: var(--radius-sm);
            }
            
            .carousel-track {
                display: flex;
                transition: transform 0.5s var(--ease-temple);
            }
            
            .carousel-slide {
                min-width: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }
            
            .carousel-slide img,
            .carousel-slide canvas {
                max-width: 100%;
                max-height: 450px;
                object-fit: contain;
            }
            
            .carousel-nav {
                position: absolute;
                top: 50%;
                transform: translateY(-50%);
                width: 40px;
                height: 40px;
                background: rgba(10, 6, 4, 0.8);
                border: 1px solid var(--glass-border);
                color: var(--text-cream);
                border-radius: 50%;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 1.2rem;
                transition: all 0.2s;
                z-index: 10;
            }
            
            .carousel-nav:hover {
                background: var(--gold-glow);
                border-color: var(--gold-primary);
            }
            
            .carousel-nav.prev { left: 10px; }
            .carousel-nav.next { right: 10px; }
            
            .carousel-dots {
                display: flex;
                justify-content: center;
                gap: 0.5rem;
                padding: 1rem 0;
            }
            
            .carousel-dot {
                width: 8px;
                height: 8px;
                border-radius: 50%;
                background: var(--glass-border);
                cursor: pointer;
                transition: all 0.2s;
            }
            
            .carousel-dot.active {
                background: var(--gold-primary);
                transform: scale(1.2);
            }
            
            /* Digital Wallet Card */
            .wallet-card {
                background: linear-gradient(135deg, var(--surface-elevated) 0%, var(--surface) 100%);
                border: 1px solid var(--glass-border);
                border-radius: var(--radius);
                padding: 1.5rem;
                max-width: 400px;
                margin: 0 auto;
                box-shadow: 0 10px 40px rgba(0,0,0,0.4);
            }
            
            .wallet-card img {
                width: 100%;
                border-radius: var(--radius-sm);
            }
            
            .wallet-actions {
                display: flex;
                gap: 0.5rem;
                margin-top: 1rem;
            }
            
            /* Infographic */
            .infographic-container {
                text-align: center;
            }
            
            .infographic-container img {
                max-width: 100%;
                height: auto;
                border-radius: var(--radius-sm);
                cursor: zoom-in;
                transition: transform 0.3s;
            }
            
            .infographic-container img:hover {
                transform: scale(1.02);
            }
            
            /* Data Table */
            .data-table-container {
                overflow-x: auto;
                margin: 1.5rem 0;
            }
            
            .data-table {
                width: 100%;
                border-collapse: collapse;
                font-size: 0.8rem;
            }
            
            .data-table th,
            .data-table td {
                padding: 0.75rem 1rem;
                text-align: left;
                border-bottom: 1px solid var(--glass-border);
            }
            
            .data-table th {
                background: var(--void);
                color: var(--gold-primary);
                font-weight: 600;
                text-transform: uppercase;
                font-size: 0.7rem;
                letter-spacing: 0.05em;
                position: sticky;
                top: 0;
            }
            
            .data-table tr {
                transition: background 0.2s;
                cursor: pointer;
            }
            
            .data-table tr:hover {
                background: var(--gold-glow);
            }
            
            .data-table tr.active {
                background: rgba(200, 155, 60, 0.2);
            }
            
            .data-table td {
                color: var(--text-cream);
            }
            
            .data-table .type-badge {
                display: inline-block;
                padding: 0.15rem 0.5rem;
                border-radius: 99px;
                font-size: 0.65rem;
                font-weight: 600;
            }
            
            /* Google Maps Embed */
            .gmap-container {
                width: 100%;
                height: 480px;
                border-radius: var(--radius-sm);
                overflow: hidden;
            }
            
            .gmap-container iframe {
                width: 100%;
                height: 100%;
                border: none;
            }
            
            /* Slide Panel */
            .slide-panel {
                position: fixed;
                top: 0;
                right: 0;
                width: 100%;
                max-width: 480px;
                height: 100%;
                background: var(--surface);
                border-left: 1px solid var(--glass-border);
                transform: translateX(100%);
                transition: transform 0.5s var(--ease-temple);
                z-index: 2000;
                overflow-y: auto;
            }
            
            .slide-panel.open {
                transform: translateX(0);
            }
            
            .slide-panel-header {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 1.5rem;
                border-bottom: 1px solid var(--glass-border);
                position: sticky;
                top: 0;
                background: var(--surface);
                z-index: 10;
            }
            
            .slide-panel-close {
                width: 36px;
                height: 36px;
                display: flex;
                align-items: center;
                justify-content: center;
                background: transparent;
                border: 1px solid var(--glass-border);
                border-radius: 50%;
                color: var(--text-muted);
                cursor: pointer;
                font-size: 1.2rem;
                transition: all 0.2s;
            }
            
            .slide-panel-close:hover {
                border-color: var(--gold-primary);
                color: var(--gold-primary);
            }
            
            .slide-panel-content {
                padding: 1.5rem;
            }
            
            /* Overlay */
            .overlay {
                position: fixed;
                inset: 0;
                background: rgba(10, 6, 4, 0.8);
                backdrop-filter: blur(4px);
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s;
                z-index: 1999;
            }
            
            .overlay.active {
                opacity: 1;
                visibility: visible;
            }
            
            /* Loader */
            .loader-overlay {
                position: fixed;
                inset: 0;
                background: var(--void);
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                transition: opacity 0.8s, visibility 0.8s;
            }
            
            .loader-overlay.hidden {
                opacity: 0;
                visibility: hidden;
                pointer-events: none;
            }
            
            .loader-spinner {
                width: 48px;
                height: 48px;
                border: 3px solid var(--glass-border);
                border-top-color: var(--gold-primary);
                border-radius: 50%;
                animation: spin 1s linear infinite;
                margin-bottom: 1rem;
            }
            
            .loader-text {
                font-family: 'Cinzel', serif;
                font-size: 0.85rem;
                color: var(--gold-primary);
                letter-spacing: 0.2em;
                animation: pulse 2s infinite;
            }
            
            /* Canvas Background */
            #sacred-canvas {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                pointer-events: none;
                z-index: 0;
            }
            
            /* Language Toggle */
            .lang-toggle {
                position: fixed;
                top: 1rem;
                right: 1rem;
                z-index: 1500;
            }
            
            .lang-btn {
                padding: 0.5rem 1rem;
                background: var(--surface);
                border: 1px solid var(--glass-border);
                color: var(--gold-primary);
                border-radius: 99px;
                font-size: 0.75rem;
                font-weight: 600;
                cursor: pointer;
                transition: all 0.2s;
                font-family: inherit;
            }
            
            .lang-btn:hover {
                background: var(--gold-glow);
                border-color: var(--gold-primary);
            }
            
            /* Lightbox */
            .lightbox {
                position: fixed;
                inset: 0;
                background: rgba(10, 6, 4, 0.95);
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 3000;
                opacity: 0;
                visibility: hidden;
                transition: all 0.3s;
            }
            
            .lightbox.active {
                opacity: 1;
                visibility: visible;
            }
            
            .lightbox img {
                max-width: 90%;
                max-height: 90%;
                object-fit: contain;
                border-radius: var(--radius);
            }
            
            .lightbox-close {
                position: absolute;
                top: 2rem;
                right: 2rem;
                width: 48px;
                height: 48px;
                background: var(--surface);
                border: 1px solid var(--glass-border);
                border-radius: 50%;
                color: var(--text-cream);
                font-size: 1.5rem;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all 0.2s;
            }
            
            .lightbox-close:hover {
                border-color: var(--gold-primary);
                color: var(--gold-primary);
            }
        }

        @layer utilities {
            .text-center { text-align: center; }
            .mt-1 { margin-top: 0.5rem; }
            .mt-2 { margin-top: 1rem; }
            .mt-3 { margin-top: 1.5rem; }
            .mb-1 { margin-bottom: 0.5rem; }
            .mb-2 { margin-bottom: 1rem; }
            .hidden { display: none !important; }
            .flex { display: flex; }
            .items-center { align-items: center; }
            .gap-1 { gap: 0.5rem; }
            .gap-2 { gap: 1rem; }
        }

        @layer animations {
            @keyframes spin {
                to { transform: rotate(360deg); }
            }
            
            @keyframes pulse {
                0%, 100% { opacity: 1; }
                50% { opacity: 0.5; }
            }
            
            @keyframes fadeIn {
                from { opacity: 0; transform: translateY(10px); }
                to { opacity: 1; transform: translateY(0); }
            }
            
            @keyframes float {
                0%, 100% { transform: translateY(0); }
                50% { transform: translateY(-10px); }
            }
            
            .animate-fadeIn {
                animation: fadeIn 0.5s var(--ease-temple) forwards;
            }
        }
    </style>
</head>
<body data-lang="en">
    <!-- Sacred Canvas Background -->
    <canvas id="sacred-canvas"></canvas>
    
    <!-- Loader -->
    <div id="loader" class="loader-overlay">
        <div class="loader-spinner"></div>
        <div class="loader-text">INITIALIZING EXPEDITION...</div>
    </div>
    
    <!-- Language Toggle -->
    <div class="lang-toggle">
        <button class="lang-btn" onclick="APP.toggleLang()">EN / TH</button>
    </div>
    
    <!-- Lightbox -->
    <div id="lightbox" class="lightbox" onclick="APP.closeLightbox()">
        <button class="lightbox-close" onclick="APP.closeLightbox()">‚úï</button>
        <img id="lightbox-img" src="" alt="">
    </div>
    
    <!-- Overlay -->
    <div id="overlay" class="overlay" onclick="APP.closePanel()"></div>
    
    <!-- Slide Panel -->
    <aside id="slide-panel" class="slide-panel">
        <div class="slide-panel-header">
            <h3 id="panel-title" style="font-family: 'Cinzel', serif; color: var(--gold-primary);"></h3>
            <button class="slide-panel-close" onclick="APP.closePanel()">‚úï</button>
        </div>
        <div id="panel-content" class="slide-panel-content"></div>
    </aside>
    
    <!-- Main Layout -->
    <div class="main-grid">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="header">
                <h1 class="header-title">
                    <span lang="en">Chiang Mai <span class="accent">&</span> Beyond</span>
                    <span lang="th">‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà <span class="accent">&</span> ‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏Å‡∏ß‡πà‡∏≤</span>
                </h1>
                <p class="header-subtitle">
                    <span lang="en">72-Hour Expedition ¬∑ Feb 6-8, 2026</span>
                    <span lang="th">‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à 72 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á ¬∑ 6-8 ‡∏Å.‡∏û. 2569</span>
                </p>
            </div>
            
            <div class="ref-bar">
                <div class="ref-chip">
                    <span class="label">‚úà</span>
                    <span class="val">FNQF5K</span>
                </div>
                <div class="ref-chip">
                    <span class="label">üè®</span>
                    <span class="val">1979064961</span>
                </div>
                <div class="ref-chip">
                    <span class="label">‚Üí</span>
                    <span class="val">19:05-20:25</span>
                </div>
                <div class="ref-chip">
                    <span class="label">‚Üê</span>
                    <span class="val">21:05-22:25</span>
                </div>
            </div>
            
            <!-- Day 1: Friday -->
            <section class="day-section">
                <div class="day-header">
                    <span class="day-badge fri">FRI</span>
                    <span class="day-title">
                        <span lang="en">Arrival & Izakaya</span>
                        <span lang="th">‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏ñ‡∏∂‡∏á & ‡∏≠‡∏¥‡∏ã‡∏≤‡∏Å‡∏≤‡∏¢‡∏∞</span>
                    </span>
                    <span class="day-date">06 FEB</span>
                </div>
                <div class="timeline">
                    <div class="location-card" data-id="0" data-type="airport" onclick="APP.flyTo(0)">
                        <div class="location-time">20:25 ‚Äî ARRIVE</div>
                        <div class="location-name">‚úàÔ∏è Chiang Mai Airport (CNX)</div>
                        <div class="location-name-th">‡∏ó‡πà‡∏≤‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏¢‡∏≤‡∏ô‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà</div>
                        <div class="location-desc">BKK ‚Üí CNX ¬∑ Nonstop ¬∑ Ref: FNQF5K</div>
                        <span class="tag tag-airport">Arrival</span>
                    </div>
                    
                    <div class="location-card" data-id="1" data-type="izakaya" onclick="APP.flyTo(1)">
                        <div class="location-time">21:00 ‚Äì 23:30</div>
                        <div class="location-name">üç∂ Penn.izakaya</div>
                        <div class="location-desc">
                            <span lang="en">Late-night Japanese comfort food. Kitchen closes ~22:30.</span>
                            <span lang="th">‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ç‡∏µ‡πà‡∏õ‡∏∏‡πà‡∏ô‡∏°‡∏∑‡πâ‡∏≠‡∏î‡∏∂‡∏Å ‡∏Ñ‡∏£‡∏±‡∏ß‡∏£‡πâ‡∏≠‡∏ô‡∏õ‡∏¥‡∏î‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 22:30 ‡∏ô.</span>
                        </div>
                        <div class="location-pluscode">RX3M+8W</div>
                        <span class="tag tag-izakaya">Izakaya</span>
                        <span class="tag tag-warn">Open till midnight</span>
                    </div>
                    
                    <div class="location-card" data-id="2" data-type="hotel" onclick="APP.flyTo(2)">
                        <div class="location-time">23:00+</div>
                        <div class="location-name">üè® ibis Styles Chiang Mai</div>
                        <div class="location-name-th">Agoda Booking: 1979064961</div>
                        <div class="location-desc">
                            <span lang="en">Your base for 2 nights. Nimman area.</span>
                            <span lang="th">‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å 2 ‡∏Ñ‡∏∑‡∏ô ‡∏¢‡πà‡∏≤‡∏ô‡∏ô‡∏¥‡∏°‡∏°‡∏≤‡∏ô</span>
                        </div>
                        <div class="location-pluscode">RX46+F2</div>
                        <span class="tag tag-hotel">Hotel ¬∑ Night 1</span>
                    </div>
                </div>
            </section>
            
            <!-- Day 2: Saturday -->
            <section class="day-section">
                <div class="day-header">
                    <span class="day-badge sat">SAT</span>
                    <span class="day-title">
                        <span lang="en">Temples ¬∑ Laab ¬∑ Suckling Pig</span>
                        <span lang="th">‡∏ß‡∏±‡∏î ¬∑ ‡∏•‡∏≤‡∏ö ¬∑ ‡∏´‡∏°‡∏π‡∏´‡∏±‡∏ô</span>
                    </span>
                    <span class="day-date">07 FEB</span>
                </div>
                <div class="timeline">
                    <div class="location-card" data-id="3" data-type="pharmacy" onclick="APP.flyTo(3)">
                        <div class="location-time">08:30 ‚Äì 09:30</div>
                        <div class="location-name">üíä Pharmacy ‡∏´‡∏ô‡πâ‡∏≤ CMU</div>
                        <div class="location-name-th">‡∏£‡πâ‡∏≤‡∏ô‡∏¢‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà</div>
                        <div class="location-desc">
                            <span lang="en">Pick up health supplements. Quick morning stop.</span>
                            <span lang="th">‡πÅ‡∏ß‡∏∞‡∏ã‡∏∑‡πâ‡∏≠‡∏¢‡∏≤‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û/‡∏Ç‡∏≠‡∏á‡πÉ‡∏ä‡πâ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</span>
                        </div>
                        <div class="location-pluscode">RX53+9X</div>
                        <span class="tag tag-pharmacy">Pharmacy</span>
                    </div>
                    
                    <div class="location-card" data-id="4" data-type="temple" onclick="APP.flyTo(4)">
                        <div class="location-time">10:00 ‚Äì 13:00</div>
                        <div class="location-name">üôè ‡∏û‡∏£‡∏∞‡∏ò‡∏≤‡∏ï‡∏∏‡∏î‡∏≠‡∏¢‡∏Ñ‡∏≥</div>
                        <div class="location-name-th">Wat Phra That Doi Kham ¬∑ ‡∏´‡∏•‡∏ß‡∏á‡∏û‡πà‡∏≠‡∏ó‡∏±‡∏ô‡πÉ‡∏à</div>
                        <div class="location-desc">
                            <span lang="en">‚≠ê Temple of the Golden Mountain. 1,300+ years old. Make ONE wish with full name. 3 hours of unhurried prayer.</span>
                            <span lang="th">‚≠ê ‡∏ß‡∏±‡∏î‡πÄ‡∏Å‡πà‡∏≤‡πÅ‡∏Å‡πà‡∏Å‡∏ß‡πà‡∏≤ 1,300 ‡∏õ‡∏µ ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏´‡∏ß‡πâ‡∏û‡∏£‡∏∞‡∏Ç‡∏≠‡∏û‡∏£‡πÅ‡∏ö‡∏ö‡πÑ‡∏°‡πà‡∏£‡∏µ‡∏ö‡πÄ‡∏£‡πà‡∏á (‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 3 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á)</span>
                        </div>
                        <div class="location-pluscode">QW59+QF</div>
                        <span class="tag tag-temple">Temple ¬∑ Priority</span>
                    </div>
                    
                    <div class="alert-card">
                        <div class="alert-title">‚ö†Ô∏è Critical Timing</div>
                        <span lang="en">‡∏•‡∏≤‡∏ö‡∏ö‡∏±‡∏ß‡∏ï‡∏≠‡∏á opens Saturday ONLY. Last order ~14:30. Must arrive before 14:15!</span>
                        <span lang="th">‡∏•‡∏≤‡∏ö‡∏ö‡∏±‡∏ß‡∏ï‡∏≠‡∏á ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ß‡∏±‡∏ô‡πÄ‡∏™‡∏≤‡∏£‡πå ‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÑ‡∏î‡πâ‡∏ñ‡∏∂‡∏á 14:30 ‡∏ô. ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô!</span>
                    </div>
                    
                    <div class="location-card" data-id="5" data-type="food" onclick="APP.flyTo(5)">
                        <div class="location-time">13:15 ‚Äì 14:30</div>
                        <div class="location-name">üçñ ‡∏•‡∏≤‡∏ö‡∏ö‡∏±‡∏ß‡∏ï‡∏≠‡∏á</div>
                        <div class="location-name-th">Laab Bua Tong ¬∑ Saturday Only</div>
                        <div class="location-desc">
                            <span lang="en">‚≠ê Legendary laab. Saturday only, last order 14:30. Items can sell out!</span>
                            <span lang="th">‚≠ê ‡∏•‡∏≤‡∏ö‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ï‡∏≥‡∏ô‡∏≤‡∏ô ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ß‡∏±‡∏ô‡πÄ‡∏™‡∏≤‡∏£‡πå ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏≠‡∏≤‡∏à‡∏´‡∏°‡∏î‡∏Å‡πà‡∏≠‡∏ô!</span>
                        </div>
                        <div class="location-pluscode">Q2QH+RG</div>
                        <span class="tag tag-food">Food</span>
                        <span class="tag tag-warn">SAT ONLY ¬∑ LO 14:30</span>
                    </div>
                    
                    <div class="location-card" data-id="6" data-type="food" onclick="APP.flyTo(6)">
                        <div class="location-time">18:00 ‚Äì 22:00</div>
                        <div class="location-name">üê∑ ‡∏†‡∏±‡∏ï‡∏ï‡∏≤‡∏Ñ‡∏≤‡∏£‡πÄ‡∏à‡∏µ‡πà‡∏¢‡∏ó‡πâ‡∏á‡πÄ‡∏Æ‡∏á</div>
                        <div class="location-name-th">Jia Thong Heng ¬∑ Suckling Pig</div>
                        <div class="location-desc">
                            <span lang="en">üåü Hong Kong style suckling pig. Must pre-order 24hrs in advance!</span>
                            <span lang="th">üåü ‡∏´‡∏°‡∏π‡∏´‡∏±‡∏ô‡∏Æ‡πà‡∏≠‡∏á‡∏Å‡∏á ‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏≠‡∏á‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏ß‡∏±‡∏ô!</span>
                        </div>
                        <div class="location-pluscode">Q2J2+MJ</div>
                        <span class="tag tag-food">Dinner ¬∑ Suckling Pig üê∑</span>
                    </div>
                </div>
            </section>
            
            <!-- Day 3: Sunday -->
            <section class="day-section">
                <div class="day-header">
                    <span class="day-badge sun">SUN</span>
                    <span class="day-title">
                        <span lang="en">Referendum ¬∑ Mae Taeng ¬∑ Departure</span>
                        <span lang="th">‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏°‡∏ï‡∏¥ ¬∑ ‡πÅ‡∏°‡πà‡πÅ‡∏ï‡∏á ¬∑ ‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏Å‡∏•‡∏±‡∏ö</span>
                    </span>
                    <span class="day-date">08 FEB</span>
                </div>
                <div class="timeline">
                    <div class="location-card" data-id="7" data-type="civic" onclick="APP.flyTo(7)">
                        <div class="location-time">08:30 ‚Äì 10:00</div>
                        <div class="location-name">üó≥Ô∏è ‡∏™‡πÇ‡∏°‡∏™‡∏£ Land & Houses Park</div>
                        <div class="location-name-th">‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏°‡∏ï‡∏¥ ¬∑ San Sai District</div>
                        <div class="location-desc">
                            <span lang="en">Referendum voting. Bring ID card. Go early to avoid queues.</span>
                            <span lang="th">‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏°‡∏ï‡∏¥ ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ö‡∏±‡∏ï‡∏£‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏ä‡∏ô‡πÉ‡∏´‡πâ‡∏û‡∏£‡πâ‡∏≠‡∏°</span>
                        </div>
                        <div class="location-pluscode">V287+C69</div>
                        <span class="tag tag-civic">Referendum</span>
                    </div>
                    
                    <div class="location-card" data-id="8" data-type="temple" onclick="APP.flyTo(8)">
                        <div class="location-time">11:00 ‚Äì 12:00</div>
                        <div class="location-name">üõï ‡∏ß‡∏±‡∏î‡∏ó‡∏∏‡πà‡∏á‡∏´‡∏•‡∏ß‡∏á</div>
                        <div class="location-name-th">Wat Thung Luang ¬∑ Mae Taeng</div>
                        <div class="location-desc">
                            <span lang="en">Beautiful Lanna temple in Mae Taeng. ~50km north. Use Plus Code to avoid confusion!</span>
                            <span lang="th">‡∏ß‡∏±‡∏î‡∏•‡πâ‡∏≤‡∏ô‡∏ô‡∏≤‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡πÉ‡∏ô‡πÅ‡∏°‡πà‡πÅ‡∏ï‡∏á ‡πÉ‡∏ä‡πâ Plus Code ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏´‡∏•‡∏á‡∏ó‡∏≤‡∏á!</span>
                        </div>
                        <div class="location-pluscode">5W3J+XJ6</div>
                        <span class="tag tag-temple">Temple</span>
                    </div>
                    
                    <div class="location-card" data-id="9" data-type="food" onclick="APP.flyTo(9)">
                        <div class="location-time">12:15 ‚Äì 13:30</div>
                        <div class="location-name">üçñ ‡∏•‡∏≤‡∏ö‡∏ï‡πâ‡∏ô‡∏Ç‡∏≤‡∏°</div>
                        <div class="location-name-th">Laab Ton Kham ¬∑ Mae Taeng</div>
                        <div class="location-desc">
                            <span lang="en">‚≠ê Best raw buffalo laab! Right after Wat Thung Luang.</span>
                            <span lang="th">‚≠ê ‡∏•‡∏≤‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏¢‡∏î‡∏¥‡∏ö‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î! ‡πÅ‡∏ß‡∏∞‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ß‡∏±‡∏î‡∏ó‡∏∏‡πà‡∏á‡∏´‡∏•‡∏ß‡∏á</span>
                        </div>
                        <div class="location-pluscode">4WQW+FW</div>
                        <span class="tag tag-food">Food ¬∑ Must Try</span>
                    </div>
                    
                    <div class="location-card" data-id="10" data-type="food" onclick="APP.flyTo(10)">
                        <div class="location-time">17:00 ‚Äì 18:30</div>
                        <div class="location-name">üçΩÔ∏è Baan Landai</div>
                        <div class="location-name-th">‡∏ö‡πâ‡∏≤‡∏ô‡∏•‡∏≤‡∏ô‡πÑ‡∏î ¬∑ Michelin Guide</div>
                        <div class="location-desc">
                            <span lang="en">Michelin Guide restaurant. Northern Thai cuisine. Book ahead!</span>
                            <span lang="th">‡∏£‡πâ‡∏≤‡∏ô‡∏°‡∏¥‡∏ä‡∏•‡∏¥‡∏ô‡πÑ‡∏Å‡∏î‡πå ‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡πÄ‡∏´‡∏ô‡∏∑‡∏≠ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤</span>
                        </div>
                        <div class="location-pluscode">QXVP+JX</div>
                        <span class="tag tag-food">Dinner ¬∑ Michelin</span>
                    </div>
                    
                    <div class="location-card" data-id="0" data-type="airport" onclick="APP.flyTo(0)">
                        <div class="location-time">21:05 ‚Äî DEPART</div>
                        <div class="location-name">‚úàÔ∏è Chiang Mai Airport (CNX)</div>
                        <div class="location-name-th">CNX ‚Üí BKK ¬∑ Ref: FNQF5K</div>
                        <div class="location-desc">
                            <span lang="en">Arrive by 19:30 for check-in. Flight departs 21:05.</span>
                            <span lang="th">‡∏ñ‡∏∂‡∏á‡∏™‡∏ô‡∏≤‡∏°‡∏ö‡∏¥‡∏ô‡∏Å‡πà‡∏≠‡∏ô 19:30 ‡∏ô. ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏≠‡∏≠‡∏Å 21:05 ‡∏ô.</span>
                        </div>
                        <span class="tag tag-airport">Departure</span>
                    </div>
                </div>
            </section>
            
            <!-- Coffee Options -->
            <section class="day-section">
                <div class="day-header">
                    <span class="day-badge" style="color: var(--coffee-brown); border-color: rgba(176,125,86,0.3); background: rgba(176,125,86,0.08);">‚òï</span>
                    <span class="day-title">
                        <span lang="en">Coffee Spots (Anytime)</span>
                        <span lang="th">‡∏£‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡πÅ‡∏ü (‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏î‡∏Å‡πá‡πÑ‡∏î‡πâ)</span>
                    </span>
                </div>
                <div class="timeline">
                    <div class="location-card" data-id="11" data-type="coffee" onclick="APP.flyTo(11)">
                        <div class="location-name">‚òï Roast8ry Coffee Flagship</div>
                        <div class="location-desc">Industrial-chic specialty coffee</div>
                        <div class="location-pluscode">QXV9+X9</div>
                        <span class="tag tag-coffee">Coffee</span>
                    </div>
                    
                    <div class="location-card" data-id="12" data-type="coffee" onclick="APP.flyTo(12)">
                        <div class="location-name">‚òï GRAPH One Nimman</div>
                        <div class="location-desc">Iconic caf√© in One Nimman complex</div>
                        <div class="location-pluscode">QXX9+X7</div>
                        <span class="tag tag-coffee">Coffee</span>
                    </div>
                    
                    <div class="location-card" data-id="13" data-type="coffee" onclick="APP.flyTo(13)">
                        <div class="location-name">‚òï Ristr8to Original</div>
                        <div class="location-desc">World Latte Art Champion's flagship</div>
                        <div class="location-pluscode">QXX8+MV</div>
                        <span class="tag tag-coffee">Coffee</span>
                    </div>
                    
                    <div class="location-card" data-id="14" data-type="coffee" onclick="APP.flyTo(14)">
                        <div class="location-name">‚òï The Baristro Asian Style</div>
                        <div class="location-desc">Thai-contemporary caf√©</div>
                        <div class="location-pluscode">QXQ2+XM</div>
                        <span class="tag tag-coffee">Coffee</span>
                    </div>
                </div>
            </section>
        </aside>
        
        <!-- Content Area -->
        <div class="content-area">
            <!-- Map Section -->
            <section class="map-section">
                <div id="map"></div>
                
                <div class="map-legend">
                    <div class="legend-item"><span class="legend-dot" style="color: var(--temple-gold)"></span> Temple</div>
                    <div class="legend-item"><span class="legend-dot" style="color: var(--food-red)"></span> Food</div>
                    <div class="legend-item"><span class="legend-dot" style="color: var(--coffee-brown)"></span> Coffee</div>
                    <div class="legend-item"><span class="legend-dot" style="color: var(--hotel-blue)"></span> Hotel</div>
                    <div class="legend-item"><span class="legend-dot" style="color: var(--izakaya-pink)"></span> Izakaya</div>
                    <div class="legend-item"><span class="legend-dot" style="color: var(--pharmacy-teal)"></span> Pharmacy</div>
                    <div class="legend-item"><span class="legend-dot" style="color: var(--civic-purple)"></span> Civic</div>
                    <div class="legend-item"><span class="legend-dot" style="color: var(--airport-green)"></span> Airport</div>
                </div>
                
                <div class="map-controls">
                    <button class="map-btn map-btn-primary" onclick="APP.fitAllMarkers()">üìç Show All</button>
                    <a id="gmaps-link" class="map-btn" href="#" target="_blank">üó∫Ô∏è Google Maps</a>
                    <button class="map-btn" onclick="APP.exportGeoJSON()">üíæ GeoJSON</button>
                    <button class="map-btn" onclick="APP.exportKML()">üåê KML</button>
                </div>
            </section>
            
            <!-- Narrative Section -->
            <section class="narrative-section">
                <div class="narrative-header">
                    <h2 class="narrative-title">
                        <span lang="en">The Art of <span class="gold">Strategic</span> Travel</span>
                        <span lang="th">‡∏®‡∏¥‡∏•‡∏õ‡∏∞‡πÅ‡∏´‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á<span class="gold">‡πÄ‡∏ä‡∏¥‡∏á‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå</span></span>
                    </h2>
                    <p class="narrative-subtitle">
                        <span lang="en">When Laab, Faith, and Civic Duty Converge</span>
                        <span lang="th">‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡∏≤‡∏ö ‡∏®‡∏£‡∏±‡∏ó‡∏ò‡∏≤ ‡πÅ‡∏•‡∏∞‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏•‡πÄ‡∏°‡∏∑‡∏≠‡∏á‡∏°‡∏≤‡∏ö‡∏£‡∏£‡∏à‡∏ö‡∏Å‡∏±‡∏ô</span>
                    </p>
                </div>
                
                <!-- Tabs -->
                <div class="tabs-container">
                    <div class="tabs-header">
                        <button class="tab-btn active" data-tab="narrative">
                            <span lang="en">üìñ Narrative</span>
                            <span lang="th">üìñ ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÄ‡∏•‡πà‡∏≤</span>
                        </button>
                        <button class="tab-btn" data-tab="schedule">
                            <span lang="en">üìÖ Schedule</span>
                            <span lang="th">üìÖ ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏ß‡∏•‡∏≤</span>
                        </button>
                        <button class="tab-btn" data-tab="media">
                            <span lang="en">üé¨ Media</span>
                            <span lang="th">üé¨ ‡∏™‡∏∑‡πà‡∏≠</span>
                        </button>
                        <button class="tab-btn" data-tab="documents">
                            <span lang="en">üìÑ Documents</span>
                            <span lang="th">üìÑ ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£</span>
                        </button>
                        <button class="tab-btn" data-tab="maps">
                            <span lang="en">üó∫Ô∏è Maps</span>
                            <span lang="th">üó∫Ô∏è ‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà</span>
                        </button>
                    </div>
                    
                    <!-- Narrative Tab -->
                    <div class="tab-content active" id="tab-narrative">
                        <div class="narrative-content">
                            <p class="narrative-text" lang="en">
                                A weekend trip to Chiang Mai for an <span class="highlight">Expedition-level traveler</span> isn't merely a vacation‚Äîit's a mission requiring <span class="highlight">Logistical Precision</span>. This 72-hour plan (February 6-8, 2026) proves that when time constraints, civic duty, and culinary desires converge, meticulous planning transforms chaos into a masterpiece of time management.
                            </p>
                            <p class="narrative-text" lang="th">
                                ‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏™‡∏∏‡∏î‡∏™‡∏±‡∏õ‡∏î‡∏≤‡∏´‡πå‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏£‡∏∞‡∏î‡∏±‡∏ö <span class="highlight">Expedition</span> ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏Å‡∏≤‡∏£‡∏û‡∏±‡∏Å‡∏ú‡πà‡∏≠‡∏ô ‡πÅ‡∏ï‡πà‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ä‡πâ <span class="highlight">‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡πÄ‡∏ä‡∏¥‡∏á‡πÇ‡∏•‡∏à‡∏¥‡∏™‡∏ï‡∏¥‡∏Å‡∏™‡πå</span> ‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á 72 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á (6-8 ‡∏Å‡∏∏‡∏°‡∏†‡∏≤‡∏û‡∏±‡∏ô‡∏ò‡πå 2569) ‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏µ‡πâ ‡∏Ñ‡∏∑‡∏≠‡∏ö‡∏ó‡∏û‡∏¥‡∏™‡∏π‡∏à‡∏ô‡πå‡∏ß‡πà‡∏≤‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Ç‡∏≠‡∏á‡πÄ‡∏ß‡∏•‡∏≤ ‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏•‡πÄ‡∏°‡∏∑‡∏≠‡∏á ‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏õ‡∏£‡∏≤‡∏£‡∏ñ‡∏ô‡∏≤‡πÉ‡∏ô‡∏£‡∏™‡∏ä‡∏≤‡∏ï‡∏¥‡∏°‡∏≤‡∏ö‡∏£‡∏£‡∏à‡∏ö‡∏Å‡∏±‡∏ô ‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏ó‡∏µ‡πà‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏≠‡πà‡∏≠‡∏ô‡∏à‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ß‡∏∏‡πà‡∏ô‡∏ß‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏á‡∏≤‡∏ô‡∏®‡∏¥‡∏•‡∏õ‡∏∞‡πÅ‡∏´‡πà‡∏á‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡∏™‡∏°‡∏ö‡∏π‡∏£‡∏ì‡πå‡πÅ‡∏ö‡∏ö
                            </p>
                            
                            <h3 class="narrative-section-title">
                                <span lang="en">1. "‡∏•‡∏≤‡∏ö‡∏ö‡∏±‡∏ß‡∏ï‡∏≠‡∏á" ‚Äî The Saturday-Only High Stakes</span>
                                <span lang="th">1. "‡∏•‡∏≤‡∏ö‡∏ö‡∏±‡∏ß‡∏ï‡∏≠‡∏á" ‚Äî ‡∏¢‡∏∏‡∏ó‡∏ò‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡∏ä‡∏¥‡∏á‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡πÉ‡∏ô‡∏ö‡πà‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡πÄ‡∏™‡∏≤‡∏£‡πå</span>
                            </h3>
                            <p class="narrative-text">
                                <span lang="en">
                                    In the world of Curator-level gastronomy, managing <span class="location-link" data-id="5">‡∏•‡∏≤‡∏ö‡∏ö‡∏±‡∏ß‡∏ï‡∏≠‡∏á</span> (Plus Code: Q2QH+RG) is the ultimate challenge. This restaurant opens <span class="highlight">Saturday only</span> with a daunting deadline: last order at approximately 14:30. Planning to arrive by 14:15 is "Living on the Edge"‚Äîrisk management requiring extreme precision.
                                </span>
                                <span lang="th">
                                    ‡πÉ‡∏ô‡πÇ‡∏•‡∏Å‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡∏Å‡∏¥‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö Curator ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≤‡∏ô <span class="location-link" data-id="5">‡∏•‡∏≤‡∏ö‡∏ö‡∏±‡∏ß‡∏ï‡∏≠‡∏á</span> (Plus Code: Q2QH+RG) ‡∏Ñ‡∏∑‡∏≠‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏ó‡∏µ‡πà‡∏ó‡πâ‡∏≤‡∏ó‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î ‡∏£‡πâ‡∏≤‡∏ô‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡∏¥‡∏î<span class="highlight">‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ß‡∏±‡∏ô‡πÄ‡∏™‡∏≤‡∏£‡πå</span>‡πÅ‡∏•‡∏∞‡∏°‡∏µ‡πÄ‡∏™‡πâ‡∏ô‡∏ï‡∏≤‡∏¢‡∏ó‡∏µ‡πà‡∏ô‡πà‡∏≤‡∏´‡∏ß‡∏±‡πà‡∏ô‡πÉ‡∏à‡∏Ñ‡∏∑‡∏≠ Last Order ‡πÉ‡∏ô‡πÄ‡∏ß‡∏•‡∏≤‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 14:30 ‡∏ô. ‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡πÉ‡∏´‡πâ‡πÑ‡∏õ‡∏ñ‡∏∂‡∏á‡πÉ‡∏ô‡πÄ‡∏ß‡∏•‡∏≤ 14:15 ‡∏ô. ‡∏à‡∏∂‡∏á‡πÄ‡∏õ‡πá‡∏ô‡∏Å‡∏≤‡∏£ "Living on the Edge" ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏≤‡∏®‡∏±‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏°‡πà‡∏ô‡∏¢‡∏≥‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏π‡∏á
                                </span>
                            </p>
                            
                            <div class="narrative-quote">
                                "Larb Bua Tong: Saturday only with last order ~14:30. Arrival planned before 14:15. Public listings warn that items can sell out."
                            </div>
                            
                            <h3 class="narrative-section-title">
                                <span lang="en">2. "Luxury of Time" ‚Äî Unhurried Spiritual Connection</span>
                                <span lang="th">2. "Luxury of Time" ‚Äî ‡∏™‡∏±‡∏°‡∏ú‡∏±‡∏™‡∏ó‡∏≤‡∏á‡∏à‡∏¥‡∏ï‡∏ß‡∏¥‡∏ç‡∏ç‡∏≤‡∏ì‡∏ó‡∏µ‡πà‡∏ß‡∏±‡∏î‡∏û‡∏£‡∏∞‡∏ò‡∏≤‡∏ï‡∏∏‡∏î‡∏≠‡∏¢‡∏Ñ‡∏≥</span>
                            </h3>
                            <p class="narrative-text">
                                <span lang="en">
                                    While typical tourists spend mere minutes at temples, the expert traveler allocates <span class="highlight">150 minutes (10:00 ‚Äì 12:30)</span> for <span class="location-link" data-id="4">‡∏´‡∏•‡∏ß‡∏á‡∏û‡πà‡∏≠‡∏ó‡∏±‡∏ô‡πÉ‡∏à</span> (Plus Code: QW59+QF). This creates "space" within a packed schedule. Ample prayer time is essential for the local tradition of making <span class="highlight">ONE wish only</span>, stating your full name clearly.
                                </span>
                                <span lang="th">
                                    ‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ó‡∏µ‡πà‡∏ô‡∏±‡∏Å‡∏ó‡πà‡∏≠‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß‡∏ó‡∏±‡πà‡∏ß‡πÑ‡∏õ‡∏°‡∏±‡∏Å‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏™‡∏±‡πâ‡∏ô‡πÜ ‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÅ‡∏ß‡∏∞‡πÑ‡∏´‡∏ß‡πâ‡∏û‡∏£‡∏∞ ‡πÅ‡∏ï‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç‡∏î‡πâ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏™‡∏£‡∏£‡πÄ‡∏ß‡∏•‡∏≤ <span class="highlight">150 ‡∏ô‡∏≤‡∏ó‡∏µ (10:00 ‚Äì 12:30 ‡∏ô.)</span> ‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏ö <span class="location-link" data-id="4">‡∏´‡∏•‡∏ß‡∏á‡∏û‡πà‡∏≠‡∏ó‡∏±‡∏ô‡πÉ‡∏à</span> (Plus Code: QW59+QF) ‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á "‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤‡∏á" ‡∏ó‡πà‡∏≤‡∏°‡∏Å‡∏•‡∏≤‡∏á‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏£‡∏±‡∏î‡∏ï‡∏±‡∏ß ‡∏Å‡∏≤‡∏£‡∏°‡∏µ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏¢‡∏¥‡πà‡∏á‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏à‡∏¥‡∏ï‡∏≠‡∏ò‡∏¥‡∏©‡∏ê‡∏≤‡∏ô‡∏ï‡∏≤‡∏°‡∏ò‡∏£‡∏£‡∏°‡πÄ‡∏ô‡∏µ‡∏¢‡∏°‡∏ó‡πâ‡∏≠‡∏á‡∏ñ‡∏¥‡πà‡∏ô‡∏ó‡∏µ‡πà‡∏ß‡πà‡∏≤ "<span class="highlight">‡∏Ñ‡∏ß‡∏£‡∏≠‡∏ò‡∏¥‡∏©‡∏ê‡∏≤‡∏ô‡∏Ç‡∏≠‡∏û‡∏£‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏Ç‡πâ‡∏≠‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô</span>" ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏£‡∏∞‡∏ö‡∏∏‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•‡πÉ‡∏´‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
                                </span>
                            </p>
                            
                            <h3 class="narrative-section-title">
                                <span lang="en">3. Mae Taeng Route ‚Äî Precision over Confusion</span>
                                <span lang="th">3. ‡πÄ‡∏™‡πâ‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏≤‡∏¢‡∏•‡∏≤‡∏ö‡πÅ‡∏•‡∏∞‡∏®‡∏£‡∏±‡∏ó‡∏ò‡∏≤‡∏ó‡∏µ‡πà‡πÅ‡∏°‡πà‡πÅ‡∏ï‡∏á ‚Äî ‡∏Å‡∏•‡∏¢‡∏∏‡∏ó‡∏ò‡πå‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î</span>
                            </h3>
                            <p class="narrative-text">
                                <span lang="en">
                                    Sunday's mission expands north, starting with civic duty at <span class="location-link" data-id="7">‡∏™‡πÇ‡∏°‡∏™‡∏£ Land & Houses Park</span> (V287+C69) for the referendum, then heading to Mae Taeng. Here's a crucial lesson in Plus Code technology: the name "<span class="location-link" data-id="8">‡∏ß‡∏±‡∏î‡∏ó‡∏∏‡πà‡∏á‡∏´‡∏•‡∏ß‡∏á</span>" (Plus Code: 5W3J+XJ6) is duplicated across provinces‚Äîyou could easily end up in Ratchaburi! Digital coordinates serve as your "Insurance Policy" against hours of wrong-direction driving.
                                </span>
                                <span lang="th">
                                    ‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå‡∏Ñ‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡∏Ç‡∏¢‡∏≤‡∏¢‡∏Ç‡∏≠‡∏ö‡πÄ‡∏Ç‡∏ï‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡πÇ‡∏ã‡∏ô‡πÄ‡∏´‡∏ô‡∏∑‡∏≠ ‡πÇ‡∏î‡∏¢‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏•‡πÄ‡∏°‡∏∑‡∏≠‡∏á "‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏°‡∏ï‡∏¥" ‡∏ó‡∏µ‡πà <span class="location-link" data-id="7">‡∏™‡πÇ‡∏°‡∏™‡∏£ Land & Houses Park</span> (V287+C69) ‡∏Å‡πà‡∏≠‡∏ô‡∏à‡∏∞‡∏°‡∏∏‡πà‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏π‡πà‡πÅ‡∏°‡πà‡πÅ‡∏ï‡∏á ‡∏à‡∏∏‡∏î‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠‡∏ö‡∏ó‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏Ç‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ Plus Code ‡πÄ‡∏ô‡∏∑‡πà‡∏≠‡∏á‡∏à‡∏≤‡∏Å‡∏ä‡∏∑‡πà‡∏≠ "<span class="location-link" data-id="8">‡∏ß‡∏±‡∏î‡∏ó‡∏∏‡πà‡∏á‡∏´‡∏•‡∏ß‡∏á</span>" (Plus Code: 5W3J+XJ6) ‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡∏à‡∏ô‡∏≥‡∏Ñ‡∏∏‡∏ì‡πÑ‡∏õ‡∏ú‡∏¥‡∏î‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏±‡∏î (‡πÄ‡∏ä‡πà‡∏ô ‡∏£‡∏≤‡∏ä‡∏ö‡∏∏‡∏£‡∏µ) ‡πÑ‡∏î‡πâ‡∏á‡πà‡∏≤‡∏¢‡πÜ ‡∏Å‡∏≤‡∏£‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏£‡∏´‡∏±‡∏™‡∏û‡∏¥‡∏Å‡∏±‡∏î‡∏î‡∏¥‡∏à‡∏¥‡∏ó‡∏±‡∏•‡∏à‡∏∂‡∏á‡πÄ‡∏õ‡πá‡∏ô "Insurance Policy" ‡∏ä‡∏±‡πâ‡∏ô‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏™‡∏µ‡∏¢‡πÄ‡∏ß‡∏•‡∏≤‡∏Ç‡∏±‡∏ö‡∏£‡∏ñ‡∏ú‡∏¥‡∏î‡∏ó‡∏¥‡∏®‡πÑ‡∏õ‡∏´‡∏•‡∏≤‡∏¢‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á
                                </span>
                            </p>
                            
                            <h3 class="narrative-section-title">
                                <span lang="en">4. The 24-Hour Suckling Pig Strategy</span>
                                <span lang="th">4. ‡∏¢‡∏∏‡∏ó‡∏ò‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå "‡∏´‡∏°‡∏π‡∏´‡∏±‡∏ô" ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£‡∏Ç‡πâ‡∏≤‡∏°‡∏Å‡∏≤‡∏•‡πÄ‡∏ß‡∏•‡∏≤</span>
                            </h3>
                            <p class="narrative-text">
                                <span lang="en">
                                    Success at <span class="location-link" data-id="6">‡∏†‡∏±‡∏ï‡∏ï‡∏≤‡∏Ñ‡∏≤‡∏£‡πÄ‡∏à‡∏µ‡πà‡∏¢‡∏ó‡πâ‡∏á‡πÄ‡∏Æ‡∏á</span> (Plus Code: Q2J2+MJ) isn't measured by walking through the door‚Äîit begins Friday before departure. The Michelin Guide-level "Hong Kong Style Suckling Pig" requires <span class="highlight">24-hour advance booking</span>.
                                </span>
                                <span lang="th">
                                    ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏Ç‡∏≠‡∏á‡∏°‡∏∑‡πâ‡∏≠‡∏Ñ‡πà‡∏≥‡∏ó‡∏µ‡πà <span class="location-link" data-id="6">‡∏†‡∏±‡∏ï‡∏ï‡∏≤‡∏Ñ‡∏≤‡∏£‡πÄ‡∏à‡∏µ‡πà‡∏¢‡∏ó‡πâ‡∏á‡πÄ‡∏Æ‡∏á</span> (Plus Code: Q2J2+MJ) ‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ß‡∏±‡∏î‡∏Å‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πâ‡∏≤‡∏ô ‡πÅ‡∏ï‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Ç‡∏∂‡πâ‡∏ô‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏ß‡∏±‡∏ô‡∏®‡∏∏‡∏Å‡∏£‡πå‡∏Å‡πà‡∏≠‡∏ô‡∏≠‡∏≠‡∏Å‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á ‡πÄ‡∏°‡∏ô‡∏π "‡∏´‡∏°‡∏π‡∏´‡∏±‡∏ô‡∏Æ‡πà‡∏≠‡∏á‡∏Å‡∏á" ‡∏£‡∏∞‡∏î‡∏±‡∏ö Michelin Guide ‡∏ô‡∏µ‡πâ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏Å‡∏≤‡∏£<span class="highlight">‡∏à‡∏≠‡∏á‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</span>
                                </span>
                            </p>
                            
                            <div class="narrative-quote">
                                "For certain roast items like Hong Kong Style Suckling Pig, pre-ordering at least 1 day in advance is essential. The lowest-risk path is to arrange this before you fly on Friday afternoon."
                            </div>
                            
                            <h3 class="narrative-section-title">
                                <span lang="en">Conclusion: When Precision Transforms Travel into Discovery</span>
                                <span lang="th">‡∏ö‡∏ó‡∏™‡∏£‡∏∏‡∏õ: ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏£‡∏≠‡∏ö‡∏Ñ‡∏≠‡∏ö‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡∏™‡∏π‡πà‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏û‡∏ö</span>
                            </h3>
                            <p class="narrative-text">
                                <span lang="en">
                                    This Chiang Mai trip proves that <span class="highlight">planning precision determines experience quality</span>. Understanding venue constraints (Saturday-only laab, 24-hour suckling pig pre-orders) and leveraging navigation technology intelligently transforms a constraint-heavy weekend into a valuable "Expedition"‚Äîencompassing civic duty, spiritual faith, and culinary aesthetics.
                                </span>
                                <span lang="th">
                                    ‡∏ó‡∏£‡∏¥‡∏õ‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ô‡∏µ‡πâ‡∏û‡∏¥‡∏™‡∏π‡∏à‡∏ô‡πå‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏ß‡πà‡∏≤ <span class="highlight">‡∏Ñ‡∏ß‡∏≤‡∏°‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Ñ‡∏∑‡∏≠‡∏ï‡∏±‡∏ß‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û‡∏Ç‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå</span> ‡∏Å‡∏≤‡∏£‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Ç‡∏≠‡∏á‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà (‡πÄ‡∏ä‡πà‡∏ô ‡∏•‡∏≤‡∏ö‡∏ß‡∏±‡∏ô‡πÄ‡∏™‡∏≤‡∏£‡πå ‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏°‡∏π‡∏´‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏≠‡∏á‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤) ‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡πÄ‡∏ó‡∏Ñ‡πÇ‡∏ô‡πÇ‡∏•‡∏¢‡∏µ‡∏ô‡∏≥‡∏ó‡∏≤‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ä‡∏≤‡∏ç‡∏â‡∏•‡∏≤‡∏î ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏ß‡∏±‡∏ô‡∏´‡∏¢‡∏∏‡∏î‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏°‡∏≤‡∏Å‡∏°‡∏≤‡∏¢‡πÉ‡∏´‡πâ‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô "Expedition" ‡∏ó‡∏µ‡πà‡∏ó‡∏£‡∏á‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡πà‡∏≤ ‡∏ó‡∏±‡πâ‡∏á‡∏°‡∏¥‡∏ï‡∏¥‡∏Ç‡∏≠‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏û‡∏•‡πÄ‡∏°‡∏∑‡∏≠‡∏á ‡∏®‡∏£‡∏±‡∏ó‡∏ò‡∏≤‡∏ó‡∏≤‡∏á‡∏à‡∏¥‡∏ï‡∏ß‡∏¥‡∏ç‡∏ç‡∏≤‡∏ì ‡πÅ‡∏•‡∏∞‡∏™‡∏∏‡∏ô‡∏ó‡∏£‡∏µ‡∏¢‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå‡πÅ‡∏´‡πà‡∏á‡∏£‡∏™‡∏ä‡∏≤‡∏ï‡∏¥
                                </span>
                            </p>
                        </div>
                    </div>
                    
                    <!-- Schedule Tab -->
                    <div class="tab-content" id="tab-schedule">
                        <div class="embed-container">
                            <div class="embed-header">
                                <span class="embed-title">üìä Complete Itinerary (Google Sheets Export)</span>
                            </div>
                            <div class="embed-body no-padding">
                                <div class="data-table-container">
                                    <table class="data-table" id="schedule-table">
                                        <thead>
                                            <tr>
                                                <th>‡∏ß‡∏±‡∏ô/‡πÄ‡∏ß‡∏•‡∏≤</th>
                                                <th>‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°/‡∏ä‡∏∑‡πà‡∏≠‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà</th>
                                                <th>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó</th>
                                                <th>Plus Code</th>
                                                <th>‡∏ó‡∏≥‡πÄ‡∏•‡∏ó‡∏µ‡πà‡∏ï‡∏±‡πâ‡∏á</th>
                                                <th>‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr data-id="1" onclick="APP.flyTo(1)">
                                                <td>‡∏®‡∏∏‡∏Å‡∏£‡πå 6 ‡∏Å.‡∏û. / 21:00-23:30</td>
                                                <td>Penn.izakaya</td>
                                                <td><span class="type-badge tag-izakaya">‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£</span></td>
                                                <td>RX3M+8W</td>
                                                <td>‡∏ä‡πâ‡∏≤‡∏á‡πÄ‡∏ú‡∏∑‡∏≠‡∏Å/‡πÄ‡∏´‡∏ô‡∏∑‡∏≠‡∏Ñ‡∏π‡πÄ‡∏°‡∏∑‡∏≠‡∏á</td>
                                                <td>‡πÄ‡∏õ‡∏¥‡∏î‡∏ñ‡∏∂‡∏á‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏á‡∏Ñ‡∏∑‡∏ô ‡∏Ñ‡∏£‡∏±‡∏ß‡∏£‡πâ‡∏≠‡∏ô‡∏õ‡∏¥‡∏î ~22:30</td>
                                            </tr>
                                            <tr data-id="2" onclick="APP.flyTo(2)">
                                                <td>‡∏®‡∏∏‡∏Å‡∏£‡πå 6 ‡∏Å.‡∏û. / 23:00+</td>
                                                <td>ibis Styles Chiang Mai</td>
                                                <td><span class="type-badge tag-hotel">‡∏ó‡∏µ‡πà‡∏û‡∏±‡∏Å</span></td>
                                                <td>RX46+F2</td>
                                                <td>‡∏¢‡πà‡∏≤‡∏ô‡∏ô‡∏¥‡∏°‡∏°‡∏≤‡∏ô/‡∏ä‡πâ‡∏≤‡∏á‡πÄ‡∏ú‡∏∑‡∏≠‡∏Å</td>
                                                <td>Agoda ID: 1979064961</td>
                                            </tr>
                                            <tr data-id="3" onclick="APP.flyTo(3)">
                                                <td>‡πÄ‡∏™‡∏≤‡∏£‡πå 7 ‡∏Å.‡∏û. / 08:30-09:30</td>
                                                <td>Pharmacy ‡∏´‡∏ô‡πâ‡∏≤ CMU</td>
                                                <td><span class="type-badge tag-pharmacy">‡∏£‡πâ‡∏≤‡∏ô‡∏Ç‡∏≤‡∏¢‡∏¢‡∏≤</span></td>
                                                <td>RX53+9X</td>
                                                <td>‡∏´‡∏ô‡πâ‡∏≤ ‡∏°.‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà</td>
                                                <td>‡πÅ‡∏ß‡∏∞‡∏ã‡∏∑‡πâ‡∏≠‡∏¢‡∏≤‡πÄ‡∏™‡∏£‡∏¥‡∏°‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û</td>
                                            </tr>
                                            <tr data-id="4" onclick="APP.flyTo(4)">
                                                <td>‡πÄ‡∏™‡∏≤‡∏£‡πå 7 ‡∏Å.‡∏û. / 10:00-13:00</td>
                                                <td>‡∏û‡∏£‡∏∞‡∏ò‡∏≤‡∏ï‡∏∏‡∏î‡∏≠‡∏¢‡∏Ñ‡∏≥</td>
                                                <td><span class="type-badge tag-temple">‡∏ß‡∏±‡∏î</span></td>
                                                <td>QW59+QF</td>
                                                <td>‡πÅ‡∏°‡πà‡πÄ‡∏´‡∏µ‡∏¢‡∏∞</td>
                                                <td>‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡πÑ‡∏´‡∏ß‡πâ‡∏û‡∏£‡∏∞ ~3 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</td>
                                            </tr>
                                            <tr data-id="5" onclick="APP.flyTo(5)">
                                                <td>‡πÄ‡∏™‡∏≤‡∏£‡πå 7 ‡∏Å.‡∏û. / 13:15-14:30</td>
                                                <td>‡∏•‡∏≤‡∏ö‡∏ö‡∏±‡∏ß‡∏ï‡∏≠‡∏á</td>
                                                <td><span class="type-badge tag-food">‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£</span></td>
                                                <td>Q2QH+RG</td>
                                                <td>‡∏´‡∏ô‡∏≠‡∏á‡∏õ‡πà‡∏≤‡∏Ñ‡∏£‡∏±‡πà‡∏á</td>
                                                <td>‚ö†Ô∏è ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏ß‡∏±‡∏ô‡πÄ‡∏™‡∏≤‡∏£‡πå LO 14:30</td>
                                            </tr>
                                            <tr data-id="6" onclick="APP.flyTo(6)">
                                                <td>‡πÄ‡∏™‡∏≤‡∏£‡πå 7 ‡∏Å.‡∏û. / 18:00-22:00</td>
                                                <td>‡∏†‡∏±‡∏ï‡∏ï‡∏≤‡∏Ñ‡∏≤‡∏£‡πÄ‡∏à‡∏µ‡πà‡∏¢‡∏ó‡πâ‡∏á‡πÄ‡∏Æ‡∏á</td>
                                                <td><span class="type-badge tag-food">‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£</span></td>
                                                <td>Q2J2+MJ</td>
                                                <td>‡∏ü‡πâ‡∏≤‡∏Æ‡πà‡∏≤‡∏°</td>
                                                <td>‡∏´‡∏°‡∏π‡∏´‡∏±‡∏ô ‡∏ï‡πâ‡∏≠‡∏á‡∏à‡∏≠‡∏á‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤ 1 ‡∏ß‡∏±‡∏ô</td>
                                            </tr>
                                            <tr data-id="7" onclick="APP.flyTo(7)">
                                                <td>‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå 8 ‡∏Å.‡∏û. / 08:30-10:00</td>
                                                <td>‡∏™‡πÇ‡∏°‡∏™‡∏£ Land & Houses Park</td>
                                                <td><span class="type-badge tag-civic">‡∏†‡∏≤‡∏£‡∏Å‡∏¥‡∏à‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</span></td>
                                                <td>V287+C69</td>
                                                <td>‡∏™‡∏±‡∏ô‡∏ó‡∏£‡∏≤‡∏¢</td>
                                                <td>‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏°‡∏ï‡∏¥ ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ö‡∏±‡∏ï‡∏£ ‡∏õ‡∏ä‡∏ä.</td>
                                            </tr>
                                            <tr data-id="8" onclick="APP.flyTo(8)">
                                                <td>‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå 8 ‡∏Å.‡∏û. / 11:00-12:00</td>
                                                <td>‡∏ß‡∏±‡∏î‡∏ó‡∏∏‡πà‡∏á‡∏´‡∏•‡∏ß‡∏á</td>
                                                <td><span class="type-badge tag-temple">‡∏ß‡∏±‡∏î</span></td>
                                                <td>5W3J+XJ6</td>
                                                <td>‡πÅ‡∏°‡πà‡πÅ‡∏ï‡∏á</td>
                                                <td>‡πÉ‡∏ä‡πâ Plus Code ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏´‡∏•‡∏á‡∏ó‡∏≤‡∏á</td>
                                            </tr>
                                            <tr data-id="9" onclick="APP.flyTo(9)">
                                                <td>‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå 8 ‡∏Å.‡∏û. / 12:15-13:30</td>
                                                <td>‡∏•‡∏≤‡∏ö‡∏ï‡πâ‡∏ô‡∏Ç‡∏≤‡∏°</td>
                                                <td><span class="type-badge tag-food">‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£</span></td>
                                                <td>4WQW+FW</td>
                                                <td>‡πÅ‡∏°‡πà‡πÅ‡∏ï‡∏á</td>
                                                <td>‡πÅ‡∏ß‡∏∞‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏´‡∏•‡∏±‡∏á‡∏ß‡∏±‡∏î‡∏ó‡∏∏‡πà‡∏á‡∏´‡∏•‡∏ß‡∏á</td>
                                            </tr>
                                            <tr data-id="10" onclick="APP.flyTo(10)">
                                                <td>‡∏≠‡∏≤‡∏ó‡∏¥‡∏ï‡∏¢‡πå 8 ‡∏Å.‡∏û. / 17:00-18:30</td>
                                                <td>Baan Landai</td>
                                                <td><span class="type-badge tag-food">‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£</span></td>
                                                <td>QXVP+JX</td>
                                                <td>‡πÉ‡∏ô‡πÄ‡∏°‡∏∑‡∏≠‡∏á/‡∏Ñ‡∏π‡πÄ‡∏°‡∏∑‡∏≠‡∏á</td>
                                                <td>Michelin Guide ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Media Tab -->
                    <div class="tab-content" id="tab-media">
                        <!-- Video Embed -->
                        <div class="embed-container">
                            <div class="embed-header">
                                <span class="embed-title">üé¨ Trip Overview Video</span>
                            </div>
                            <div class="embed-body">
                                <div class="video-wrapper">
                                    <iframe 
                                        src="https://www.youtube.com/embed/JB46Ant7gTU" 
                                        title="Chiang Mai Trip Video"
                                        allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                                        allowfullscreen>
                                    </iframe>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Audio Embed -->
                        <div class="embed-container">
                            <div class="embed-header">
                                <span class="embed-title">üéß Referendum Audio Briefing</span>
                            </div>
                            <div class="embed-body">
                                <div class="audio-player">
                                    <span style="font-size: 2rem;">üéôÔ∏è</span>
                                    <audio controls preload="metadata" style="flex: 1;">
                                        <source src="https://tanat.net/referendum/CNX_referendum_compacted.m4a" type="audio/mp4">
                                        Your browser does not support the audio element.
                                    </audio>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Infographic -->
                        <div class="embed-container">
                            <div class="embed-header">
                                <span class="embed-title">üìä Referendum Infographic</span>
                            </div>
                            <div class="embed-body">
                                <div class="infographic-container">
                                    <img 
                                        src="https://tanat.net/referendum/referendum_infographics.jpg" 
                                        alt="Referendum Infographic"
                                        onclick="APP.openLightbox(this.src)"
                                        loading="lazy"
                                    >
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Documents Tab -->
                    <div class="tab-content" id="tab-documents">
                        <!-- PDF Carousel -->
                        <div class="embed-container">
                            <div class="embed-header">
                                <span class="embed-title">üìë Chiang Mai Weekend Protocol</span>
                            </div>
                            <div class="embed-body">
                                <div id="protocol-carousel" class="pdf-flipbook">
                                    <div class="pdf-canvas-container">
                                        <canvas id="protocol-canvas" class="pdf-canvas"></canvas>
                                    </div>
                                    <div class="pdf-controls">
                                        <button class="pdf-nav-btn" id="protocol-prev" onclick="APP.pdfPrev('protocol')">‚óÄ Prev</button>
                                        <span class="pdf-page-info" id="protocol-page-info">Page 1 / 1</span>
                                        <button class="pdf-nav-btn" id="protocol-next" onclick="APP.pdfNext('protocol')">Next ‚ñ∂</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Boarding Pass PDF -->
                        <div class="embed-container">
                            <div class="embed-header">
                                <span class="embed-title">üé´ Boarding Pass (Flippable PDF)</span>
                            </div>
                            <div class="embed-body">
                                <div id="boarding-carousel" class="pdf-flipbook">
                                    <div class="pdf-canvas-container">
                                        <canvas id="boarding-canvas" class="pdf-canvas"></canvas>
                                    </div>
                                    <div class="pdf-controls">
                                        <button class="pdf-nav-btn" id="boarding-prev" onclick="APP.pdfPrev('boarding')">‚óÄ Prev</button>
                                        <span class="pdf-page-info" id="boarding-page-info">Page 1 / 1</span>
                                        <button class="pdf-nav-btn" id="boarding-next" onclick="APP.pdfNext('boarding')">Next ‚ñ∂</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Digital Wallet Boarding Pass -->
                        <div class="embed-container">
                            <div class="embed-header">
                                <span class="embed-title">üì± Digital Wallet Boarding Pass</span>
                            </div>
                            <div class="embed-body">
                                <div class="wallet-card">
                                    <img 
                                        src="https://tanat.net/referendum/Fri_Feb6th_BKK_CNX.png" 
                                        alt="Digital Boarding Pass"
                                        onclick="APP.openLightbox(this.src)"
                                        loading="lazy"
                                    >
                                    <div class="wallet-actions">
                                        <a href="https://tanat.net/referendum/Fri_Feb6th_BKK_CNX.png" download class="map-btn" style="flex: 1; justify-content: center;">
                                            üíæ Download
                                        </a>
                                        <button class="map-btn" style="flex: 1; justify-content: center;" onclick="APP.openLightbox('https://tanat.net/referendum/Fri_Feb6th_BKK_CNX.png')">
                                            üîç Enlarge
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Maps Tab -->
                    <div class="tab-content" id="tab-maps">
                        <!-- Google Maps Embed -->
                        <div class="embed-container">
                            <div class="embed-header">
                                <span class="embed-title">üó∫Ô∏è Google My Maps ‚Äî Full Route</span>
                            </div>
                            <div class="embed-body no-padding">
                                <div class="gmap-container">
                                    <iframe 
                                        src="https://www.google.com/maps/d/u/0/embed?mid=1CLavqExD8TZs2BMsMqllC6bpffeP_uI&ehbc=2E312F" 
                                        allowfullscreen>
                                    </iframe>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

    <script>
        // ============================================
        // LOCATION DATA
        // ============================================
        const LOCATIONS = [
            { id: 0, name: "Chiang Mai Airport (CNX)", nameTh: "‡∏ó‡πà‡∏≤‡∏≠‡∏≤‡∏Å‡∏≤‡∏®‡∏¢‡∏≤‡∏ô‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà", lat: 18.7668, lng: 98.9625, type: "airport", day: "fri/sun", plusCode: "4X6C+9R" },
            { id: 1, name: "Penn.izakaya", nameTh: "‡πÄ‡∏û‡πá‡∏ç ‡∏≠‡∏¥‡∏ã‡∏≤‡∏Å‡∏≤‡∏¢‡∏∞", lat: 18.803312, lng: 98.984813, type: "izakaya", day: "fri", plusCode: "RX3M+8W" },
            { id: 2, name: "ibis Styles Chiang Mai", nameTh: "‡πÑ‡∏≠‡∏ö‡∏¥‡∏™ ‡∏™‡πÑ‡∏ï‡∏•‡πå ‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà", lat: 18.806188, lng: 98.960062, type: "hotel", day: "fri-sun", plusCode: "RX46+F2" },
            { id: 3, name: "Pharmacy CMU", nameTh: "‡∏£‡πâ‡∏≤‡∏ô‡∏¢‡∏≤‡∏´‡∏ô‡πâ‡∏≤ ‡∏°.‡πÄ‡∏ä‡∏µ‡∏¢‡∏á‡πÉ‡∏´‡∏°‡πà", lat: 18.808438, lng: 98.954937, type: "pharmacy", day: "sat", plusCode: "RX53+9X" },
            { id: 4, name: "Phra That Doi Kham", nameTh: "‡∏û‡∏£‡∏∞‡∏ò‡∏≤‡∏ï‡∏∏‡∏î‡∏≠‡∏¢‡∏Ñ‡∏≥ ¬∑ ‡∏´‡∏•‡∏ß‡∏á‡∏û‡πà‡∏≠‡∏ó‡∏±‡∏ô‡πÉ‡∏à", lat: 18.759437, lng: 98.918688, type: "temple", day: "sat", plusCode: "QW59+QF" },
            { id: 5, name: "Laab Bua Tong", nameTh: "‡∏•‡∏≤‡∏ö‡∏ö‡∏±‡∏ß‡∏ï‡∏≠‡∏á (‡πÄ‡∏™‡∏≤‡∏£‡πå‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)", lat: 18.789563, lng: 99.028813, type: "food", day: "sat", plusCode: "Q2QH+RG" },
            { id: 6, name: "Jia Thong Heng", nameTh: "‡∏†‡∏±‡∏ï‡∏ï‡∏≤‡∏Ñ‡∏≤‡∏£‡πÄ‡∏à‡∏µ‡πà‡∏¢‡∏ó‡πâ‡∏á‡πÄ‡∏Æ‡∏á ¬∑ ‡∏´‡∏°‡∏π‡∏´‡∏±‡∏ô", lat: 18.781687, lng: 99.001562, type: "food", day: "sat", plusCode: "Q2J2+MJ" },
            { id: 7, name: "Land & Houses Park Club", nameTh: "‡∏™‡πÇ‡∏°‡∏™‡∏£ Land & Houses Park ¬∑ ‡∏•‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏≤‡∏°‡∏ï‡∏¥", lat: 18.866038, lng: 99.013109, type: "civic", day: "sun", plusCode: "V287+C69" },
            { id: 8, name: "Wat Thung Luang", nameTh: "‡∏ß‡∏±‡∏î‡∏ó‡∏∏‡πà‡∏á‡∏´‡∏•‡∏ß‡∏á ¬∑ ‡πÅ‡∏°‡πà‡πÅ‡∏ï‡∏á", lat: 19.154938, lng: 98.931562, type: "temple", day: "sun", plusCode: "5W3J+XJ6" },
            { id: 9, name: "Laab Ton Kham", nameTh: "‡∏•‡∏≤‡∏ö‡∏ï‡πâ‡∏ô‡∏Ç‡∏≤‡∏°", lat: 19.138688, lng: 98.947312, type: "food", day: "sun", plusCode: "4WQW+FW" },
            { id: 10, name: "Baan Landai", nameTh: "‡∏ö‡πâ‡∏≤‡∏ô‡∏•‡∏≤‡∏ô‡πÑ‡∏î ¬∑ Michelin Guide", lat: 18.794063, lng: 98.987437, type: "food", day: "sun", plusCode: "QXVP+JX" },
            { id: 11, name: "Roast8ry Coffee Flagship", nameTh: "‡πÇ‡∏£‡∏™‡πÄ‡∏≠‡∏ó‡∏£‡∏µ‡πà ‡∏Ñ‡∏≠‡∏ü‡∏ü‡∏µ‡πà", lat: 18.794938, lng: 98.968437, type: "coffee", day: "any", plusCode: "QXV9+X9" },
            { id: 12, name: "GRAPH One Nimman", nameTh: "‡∏Å‡∏£‡∏≤‡∏ü ‡∏ß‡∏±‡∏ô ‡∏ô‡∏¥‡∏°‡∏°‡∏≤‡∏ô", lat: 18.799937, lng: 98.968187, type: "coffee", day: "any", plusCode: "QXX9+X7" },
            { id: 13, name: "Ristr8to Original", nameTh: "‡∏£‡∏¥‡∏™‡πÄ‡∏ï‡∏£‡∏ó‡πÇ‡∏ï‡πâ ‡∏≠‡∏≠‡∏£‡∏¥‡∏à‡∏¥‡∏ô‡∏±‡∏•", lat: 18.799188, lng: 98.967187, type: "coffee", day: "any", plusCode: "QXX8+MV" },
            { id: 14, name: "The Baristro Asian Style", nameTh: "‡πÄ‡∏î‡∏≠‡∏∞ ‡∏ö‡∏≤‡∏£‡∏¥‡∏™‡πÇ‡∏ï‡∏£ ‡πÄ‡∏≠‡πÄ‡∏ä‡∏µ‡∏¢‡∏ô ‡∏™‡πÑ‡∏ï‡∏•‡πå", lat: 18.789938, lng: 98.951688, type: "coffee", day: "any", plusCode: "QXQ2+XM" }
        ];

        const COLORS = {
            temple: '#e8a849',
            food: '#e05a4f',
            coffee: '#b07d56',
            hotel: '#5a8fd4',
            civic: '#8b6cc1',
            airport: '#5db882',
            pharmacy: '#4fc1a6',
            izakaya: '#d46a8b'
        };

        const EMOJIS = {
            temple: 'üõï',
            food: 'üçú',
            coffee: '‚òï',
            hotel: 'üè®',
            civic: 'üó≥Ô∏è',
            airport: '‚úàÔ∏è',
            pharmacy: 'üíä',
            izakaya: 'üç∂'
        };

        // ============================================
        // SIMPLEX NOISE (Minified)
        // ============================================
        class SimplexNoise{constructor(){this.p=new Uint8Array(256);for(let i=0;i<256;i++)this.p[i]=Math.floor(256*Math.random());this.perm=new Uint8Array(512);for(let i=0;i<512;i++)this.perm[i]=this.p[i&255]}dot(g,x,y){return g[0]*x+g[1]*y}noise(xin,yin){const F2=.5*(Math.sqrt(3)-1),G2=(3-Math.sqrt(3))/6;let i=Math.floor(xin+((xin+yin)*F2)),j=Math.floor(yin+((xin+yin)*F2)),t=(i+j)*G2,X0=i-t,Y0=j-t,x0=xin-X0,y0=yin-Y0;let i1,j1;if(x0>y0){i1=1;j1=0}else{i1=0;j1=1}let x1=x0-i1+G2,y1=y0-j1+G2,x2=x0-1+2*G2,y2=y0-1+2*G2,ii=i&255,jj=j&255,gi0=this.perm[ii+this.perm[jj]]%12,gi1=this.perm[ii+i1+this.perm[jj+j1]]%12,gi2=this.perm[ii+1+this.perm[jj+1]]%12,t0=.5-x0*x0-y0*y0,n0=t0<0?0:Math.pow(t0,4)*this.dot([Math.cos(gi0),Math.sin(gi0)],x0,y0),t1=.5-x1*x1-y1*y1,n1=t1<0?0:Math.pow(t1,4)*this.dot([Math.cos(gi1),Math.sin(gi1)],x1,y1),t2=.5-x2*x2-y2*y2,n2=t2<0?0:Math.pow(t2,4)*this.dot([Math.cos(gi2),Math.sin(gi2)],x2,y2);return 70*(n0+n1+n2)}}

        // ============================================
        // ANTIGRAVITY ENGINE (Background Particles)
        // ============================================
        class AntigravityEngine {
            constructor() {
                this.canvas = document.getElementById('sacred-canvas');
                this.ctx = this.canvas.getContext('2d');
                this.simplex = new SimplexNoise();
                this.particles = [];
                this.mouse = { x: 0, y: 0 };
                this.time = 0;
                
                this.resize();
                this.createParticles();
                this.bindEvents();
                this.animate();
            }
            
            resize() {
                this.width = this.canvas.width = window.innerWidth;
                this.height = this.canvas.height = window.innerHeight;
            }
            
            createParticles() {
                const count = Math.min(80, Math.floor((this.width * this.height) / 20000));
                this.particles = [];
                
                for (let i = 0; i < count; i++) {
                    this.particles.push({
                        x: Math.random() * this.width,
                        y: Math.random() * this.height,
                        size: Math.random() * 2 + 0.5,
                        speedX: (Math.random() - 0.5) * 0.3,
                        speedY: (Math.random() - 0.5) * 0.3,
                        opacity: Math.random() * 0.5 + 0.1
                    });
                }
            }
            
            bindEvents() {
                window.addEventListener('resize', () => {
                    this.resize();
                    this.createParticles();
                });
                
                window.addEventListener('mousemove', (e) => {
                    this.mouse.x = e.clientX;
                    this.mouse.y = e.clientY;
                });
            }
            
            animate() {
                this.ctx.fillStyle = 'rgba(10, 6, 4, 0.1)';
                this.ctx.fillRect(0, 0, this.width, this.height);
                
                this.time += 0.005;
                
                this.particles.forEach((p, i) => {
                    // Noise-based movement
                    const noiseX = this.simplex.noise(p.x * 0.003, this.time) * 0.5;
                    const noiseY = this.simplex.noise(p.y * 0.003, this.time + 100) * 0.5;
                    
                    p.x += p.speedX + noiseX;
                    p.y += p.speedY + noiseY;
                    
                    // Mouse repulsion
                    const dx = p.x - this.mouse.x;
                    const dy = p.y - this.mouse.y;
                    const dist = Math.sqrt(dx * dx + dy * dy);
                    
                    if (dist < 150) {
                        const force = (150 - dist) / 150;
                        p.x += (dx / dist) * force * 2;
                        p.y += (dy / dist) * force * 2;
                    }
                    
                    // Wrap around
                    if (p.x < 0) p.x = this.width;
                    if (p.x > this.width) p.x = 0;
                    if (p.y < 0) p.y = this.height;
                    if (p.y > this.height) p.y = 0;
                    
                    // Draw particle
                    this.ctx.beginPath();
                    this.ctx.arc(p.x, p.y, p.size, 0, Math.PI * 2);
                    this.ctx.fillStyle = `rgba(200, 155, 60, ${p.opacity})`;
                    this.ctx.fill();
                    
                    // Draw connections
                    for (let j = i + 1; j < this.particles.length; j++) {
                        const p2 = this.particles[j];
                        const d = Math.sqrt((p.x - p2.x) ** 2 + (p.y - p2.y) ** 2);
                        
                        if (d < 100) {
                            this.ctx.beginPath();
                            this.ctx.moveTo(p.x, p.y);
                            this.ctx.lineTo(p2.x, p2.y);
                            this.ctx.strokeStyle = `rgba(200, 155, 60, ${0.1 * (1 - d / 100)})`;
                            this.ctx.stroke();
                        }
                    }
                });
                
                requestAnimationFrame(() => this.animate());
            }
        }

        // ============================================
        // MAP MANAGER
        // ============================================
        class MapManager {
            constructor() {
                this.map = null;
                this.markers = [];
                this.activeMarker = null;
            }
            
            init() {
                this.map = L.map('map', {
                    center: [18.82, 98.97],
                    zoom: 11,
                    zoomControl: true
                });
                
                // Dark tile layer
                L.tileLayer('https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png', {
                    attribution: '¬© <a href="https://www.openstreetmap.org/copyright">OSM</a> ¬© <a href="https://carto.com/">CARTO</a>',
                    subdomains: 'abcd',
                    maxZoom: 19
                }).addTo(this.map);
                
                // Add markers
                this.addMarkers();
                
                // Add route polylines
                this.addRoutes();
                
                // Fit bounds
                this.fitAllMarkers();
                
                // Update Google Maps link
                this.updateGMapsLink();
            }
            
            addMarkers() {
                LOCATIONS.forEach(loc => {
                    const color = COLORS[loc.type] || '#888';
                    const emoji = EMOJIS[loc.type] || 'üìç';
                    
                    const icon = L.divIcon({
                        className: 'custom-div-icon',
                        html: `<div class="custom-marker" style="background:${color}"><span>${emoji}</span></div>`,
                        iconSize: [32, 40],
                        iconAnchor: [16, 40],
                        popupAnchor: [0, -40]
                    });
                    
                    const gmapsUrl = loc.plusCode
                        ? `https://maps.google.com/?q=${encodeURIComponent(loc.plusCode + ' Chiang Mai')}`
                        : `https://maps.google.com/?q=${loc.lat},${loc.lng}`;
                    
                    const marker = L.marker([loc.lat, loc.lng], { icon }).addTo(this.map);
                    
                    marker.bindPopup(`
                        <div class="popup-title">${emoji} ${loc.name}</div>
                        ${loc.nameTh ? `<div class="popup-subtitle">${loc.nameTh}</div>` : ''}
                        <div class="popup-subtitle" style="text-transform: capitalize">${loc.type} ¬∑ ${loc.day}</div>
                        <a class="popup-link" href="${gmapsUrl}" target="_blank">Open in Google Maps ‚Üó</a>
                    `);
                    
                    marker.locationData = loc;
                    this.markers.push(marker);
                });
            }
            
            addRoutes() {
                // Saturday route (gold dashed)
                const satRoute = [
                    [18.806188, 98.960062], // Hotel
                    [18.808438, 98.954937], // Pharmacy
                    [18.759437, 98.918688], // Doi Kham
                    [18.789563, 99.028813], // Laab Bua Tong
                    [18.781687, 99.001562], // Jia Thong Heng
                    [18.806188, 98.960062]  // Hotel
                ];
                
                L.polyline(satRoute, {
                    color: '#e8a849',
                    weight: 2,
                    opacity: 0.4,
                    dashArray: '8 6'
                }).addTo(this.map);
                
                // Sunday route (purple dashed)
                const sunRoute = [
                    [18.806188, 98.960062], // Hotel
                    [18.866038, 99.013109], // Referendum
                    [19.154938, 98.931562], // Wat Thung Luang
                    [19.138688, 98.947312], // Laab Ton Kham
                    [18.794063, 98.987437], // Baan Landai
                    [18.7668, 98.9625]      // Airport
                ];
                
                L.polyline(sunRoute, {
                    color: '#8b6cc1',
                    weight: 2,
                    opacity: 0.35,
                    dashArray: '8 6'
                }).addTo(this.map);
            }
            
            flyTo(id) {
                const loc = LOCATIONS[id];
                if (!loc) return;
                
                this.map.flyTo([loc.lat, loc.lng], 15, { duration: 1 });
                
                // Open popup
                const marker = this.markers[id];
                if (marker) {
                    marker.openPopup();
                }
                
                // Update active states
                this.setActiveCard(id);
            }
            
            setActiveCard(id) {
                // Remove active from all cards
                document.querySelectorAll('.location-card').forEach(card => {
                    card.classList.remove('active');
                });
                
                // Add active to matching cards
                document.querySelectorAll(`.location-card[data-id="${id}"]`).forEach(card => {
                    card.classList.add('active');
                });
                
                // Update table rows
                document.querySelectorAll('.data-table tr').forEach(row => {
                    row.classList.remove('active');
                    if (row.dataset.id == id) {
                        row.classList.add('active');
                    }
                });
            }
            
            fitAllMarkers() {
                const group = L.featureGroup(this.markers);
                this.map.fitBounds(group.getBounds().pad(0.1));
            }
            
            updateGMapsLink() {
                const pts = LOCATIONS.slice(0, 10).map(l => `${l.lat},${l.lng}`);
                document.getElementById('gmaps-link').href = `https://www.google.com/maps/dir/${pts.join('/')}`;
            }
        }

        // ============================================
        // PDF MANAGER
        // ============================================
        class PDFManager {
            constructor() {
                this.pdfs = {};
            }
            
            async loadPDF(id, url, canvasId) {
                try {
                    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
                    
                    const loadingTask = pdfjsLib.getDocument(url);
                    const pdf = await loadingTask.promise;
                    
                    this.pdfs[id] = {
                        pdf: pdf,
                        currentPage: 1,
                        totalPages: pdf.numPages,
                        canvasId: canvasId
                    };
                    
                    this.renderPage(id, 1);
                    this.updatePageInfo(id);
                } catch (error) {
                    console.error(`Error loading PDF ${id}:`, error);
                    document.getElementById(canvasId).parentElement.innerHTML = `
                        <div style="padding: 2rem; text-align: center; color: var(--text-muted);">
                            <p>üìÑ PDF Preview Unavailable</p>
                            <a href="${url}" target="_blank" class="map-btn" style="margin-top: 1rem; display: inline-flex;">
                                üì• Download PDF
                            </a>
                        </div>
                    `;
                }
            }
            
            async renderPage(id, pageNum) {
                const pdfData = this.pdfs[id];
                if (!pdfData) return;
                
                const page = await pdfData.pdf.getPage(pageNum);
                const canvas = document.getElementById(pdfData.canvasId);
                const ctx = canvas.getContext('2d');
                
                const viewport = page.getViewport({ scale: 1.5 });
                canvas.width = viewport.width;
                canvas.height = viewport.height;
                
                await page.render({
                    canvasContext: ctx,
                    viewport: viewport
                }).promise;
                
                pdfData.currentPage = pageNum;
                this.updatePageInfo(id);
            }
            
            updatePageInfo(id) {
                const pdfData = this.pdfs[id];
                if (!pdfData) return;
                
                const infoEl = document.getElementById(`${id}-page-info`);
                if (infoEl) {
                    infoEl.textContent = `Page ${pdfData.currentPage} / ${pdfData.totalPages}`;
                }
                
                const prevBtn = document.getElementById(`${id}-prev`);
                const nextBtn = document.getElementById(`${id}-next`);
                
                if (prevBtn) prevBtn.disabled = pdfData.currentPage <= 1;
                if (nextBtn) nextBtn.disabled = pdfData.currentPage >= pdfData.totalPages;
            }
            
            prev(id) {
                const pdfData = this.pdfs[id];
                if (pdfData && pdfData.currentPage > 1) {
                    this.renderPage(id, pdfData.currentPage - 1);
                }
            }
            
            next(id) {
                const pdfData = this.pdfs[id];
                if (pdfData && pdfData.currentPage < pdfData.totalPages) {
                    this.renderPage(id, pdfData.currentPage + 1);
                }
            }
        }

        // ============================================
        // MAIN APP
        // ============================================
        const APP = {
            lang: 'en',
            map: null,
            pdf: null,
            
            init() {
                console.log('[System] Initializing Chiang Mai Expedition...');
                
                // Initialize background
                new AntigravityEngine();
                
                // Initialize map
                this.map = new MapManager();
                this.map.init();
                
                // Initialize PDFs
                this.pdf = new PDFManager();
                this.pdf.loadPDF('protocol', 'https://tanat.net/referendum/Chiang_Mai_Weekend_Protocol.pdf', 'protocol-canvas');
                this.pdf.loadPDF('boarding', 'https://tanat.net/referendum/Fri_Feb6th_BKK_CNX.pdf', 'boarding-canvas');
                
                // Initialize tabs
                this.initTabs();
                
                // Initialize location links in narrative
                this.initLocationLinks();
                
                // Hide loader
                setTimeout(() => {
                    document.getElementById('loader').classList.add('hidden');
                }, 1000);
                
                console.log('[System] Expedition Ready!');
            },
            
            toggleLang() {
                this.lang = this.lang === 'en' ? 'th' : 'en';
                document.body.dataset.lang = this.lang;
            },
            
            flyTo(id) {
                this.map.flyTo(id);
                
                // Scroll map into view on mobile
                if (window.innerWidth < 1024) {
                    document.querySelector('.map-section').scrollIntoView({ behavior: 'smooth' });
                }
            },
            
            fitAllMarkers() {
                this.map.fitAllMarkers();
            },
            
            initTabs() {
                document.querySelectorAll('.tab-btn').forEach(btn => {
                    btn.addEventListener('click', () => {
                        const tabId = btn.dataset.tab;
                        
                        // Update buttons
                        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                        btn.classList.add('active');
                        
                        // Update content
                        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                        document.getElementById(`tab-${tabId}`).classList.add('active');
                    });
                });
            },
            
            initLocationLinks() {
                document.querySelectorAll('.location-link').forEach(link => {
                    const id = parseInt(link.dataset.id);
                    
                    link.addEventListener('click', () => {
                        this.flyTo(id);
                    });
                    
                    link.addEventListener('mouseenter', () => {
                        document.querySelectorAll(`.location-card[data-id="${id}"]`).forEach(card => {
                            card.style.borderColor = 'var(--gold-bright)';
                        });
                    });
                    
                    link.addEventListener('mouseleave', () => {
                        document.querySelectorAll(`.location-card[data-id="${id}"]`).forEach(card => {
                            card.style.borderColor = '';
                        });
                    });
                });
            },
            
            pdfPrev(id) {
                this.pdf.prev(id);
            },
            
            pdfNext(id) {
                this.pdf.next(id);
            },
            
            openPanel(title, content) {
                document.getElementById('panel-title').textContent = title;
                document.getElementById('panel-content').innerHTML = content;
                document.getElementById('slide-panel').classList.add('open');
                document.getElementById('overlay').classList.add('active');
            },
            
            closePanel() {
                document.getElementById('slide-panel').classList.remove('open');
                document.getElementById('overlay').classList.remove('active');
            },
            
            openLightbox(src) {
                document.getElementById('lightbox-img').src = src;
                document.getElementById('lightbox').classList.add('active');
            },
            
            closeLightbox() {
                document.getElementById('lightbox').classList.remove('active');
            },
            
            exportGeoJSON() {
                const gj = {
                    type: "FeatureCollection",
                    features: LOCATIONS.map(l => ({
                        type: "Feature",
                        properties: {
                            name: l.name,
                            nameTh: l.nameTh,
                            type: l.type,
                            day: l.day,
                            plusCode: l.plusCode || ''
                        },
                        geometry: {
                            type: "Point",
                            coordinates: [l.lng, l.lat]
                        }
                    }))
                };
                
                this.download('chiangmai-trip-feb2026.geojson', JSON.stringify(gj, null, 2), 'application/geo+json');
            },
            
            exportKML() {
                const placemarks = LOCATIONS.map(l => {
                    const name = this.escapeXML(l.name) + (l.nameTh ? ' (' + this.escapeXML(l.nameTh) + ')' : '');
                    const color = this.hexToKML(COLORS[l.type] || '#888888');
                    return `  <Placemark>
    <name>${name}</name>
    <description>${this.escapeXML(l.type)} - ${this.escapeXML(l.day)}</description>
    <Style><IconStyle><color>${color}</color><scale>1.2</scale></IconStyle></Style>
    <Point><coordinates>${l.lng},${l.lat},0</coordinates></Point>
  </Placemark>`;
                }).join('\n');
                
                const kml = `<?xml version="1.0" encoding="UTF-8"?>
<kml xmlns="http://www.opengis.net/kml/2.2">
<Document>
  <name>Chiang Mai Trip - Feb 6-8, 2026</name>
  <description>72-Hour Expedition: Temples, Laab, Coffee, Referendum</description>
${placemarks}
</Document>
</kml>`;
                
                this.download('chiangmai-trip-feb2026.kml', kml, 'application/vnd.google-earth.kml+xml');
            },
            
            escapeXML(s) {
                return s.replace(/&/g, '&').replace(/</g, '<').replace(/>/g, '>');
            },
            
            hexToKML(hex) {
                const r = hex.slice(1, 3);
                const g = hex.slice(3, 5);
                const b = hex.slice(5, 7);
                return 'ff' + b + g + r;
            },
            
            download(filename, content, mimeType) {
                const a = document.createElement('a');
                a.href = URL.createObjectURL(new Blob([content], { type: mimeType }));
                a.download = filename;
                a.click();
                URL.revokeObjectURL(a.href);
            }
        };

        // ============================================
        // RESILIENT LOADER
        // ============================================
        function waitForLibs(retries = 0) {
            if (typeof L !== 'undefined') {
                console.log(`[System] Libraries loaded (${retries * 100}ms)`);
                APP.init();
            } else if (retries < 50) {
                setTimeout(() => waitForLibs(retries + 1), 100);
            } else {
                console.error('[System] Failed to load libraries');
                document.getElementById('loader').innerHTML = `
                    <div style="color: var(--gold-primary); text-align: center;">
                        <p>Failed to load required libraries.</p>
                        <button onclick="location.reload()" class="map-btn" style="margin-top: 1rem;">
                            üîÑ Reload Page
                        </button>
                    </div>
                `;
            }
        }

        document.addEventListener('DOMContentLoaded', () => waitForLibs());
    </script>
</body>
</html>
